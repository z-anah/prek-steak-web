(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ka(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const mt={},qn=[],ae=()=>{},Mp=()=>!1,Ei=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Na=e=>e.startsWith("onUpdate:"),Lt=Object.assign,Oa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Lp=Object.prototype.hasOwnProperty,tt=(e,t)=>Lp.call(e,t),K=Array.isArray,zn=e=>wi(e)==="[object Map]",uh=e=>wi(e)==="[object Set]",W=e=>typeof e=="function",Rt=e=>typeof e=="string",fr=e=>typeof e=="symbol",_t=e=>e!==null&&typeof e=="object",hh=e=>(_t(e)||W(e))&&W(e.then)&&W(e.catch),fh=Object.prototype.toString,wi=e=>fh.call(e),Fp=e=>wi(e).slice(8,-1),dh=e=>wi(e)==="[object Object]",Ma=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$s=ka(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ti=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Up=/-(\w)/g,xe=Ti(e=>e.replace(Up,(t,n)=>n?n.toUpperCase():"")),Bp=/\B([A-Z])/g,dr=Ti(e=>e.replace(Bp,"-$1").toLowerCase()),Ii=Ti(e=>e.charAt(0).toUpperCase()+e.slice(1)),oo=Ti(e=>e?`on${Ii(e)}`:""),nn=(e,t)=>!Object.is(e,t),ao=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Js=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},$p=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ac;const ph=()=>ac||(ac=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function La(e){if(K(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Rt(r)?Hp(r):La(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Rt(e)||_t(e))return e}const jp=/;(?![^(]*\))/g,qp=/:([^]+)/,zp=/\/\*[^]*?\*\//g;function Hp(e){const t={};return e.replace(zp,"").split(jp).forEach(n=>{if(n){const r=n.split(qp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Fa(e){let t="";if(Rt(e))t=e;else if(K(e))for(let n=0;n<e.length;n++){const r=Fa(e[n]);r&&(t+=r+" ")}else if(_t(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Kp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gp=ka(Kp);function gh(e){return!!e||e===""}const Zs=e=>Rt(e)?e:e==null?"":K(e)||_t(e)&&(e.toString===fh||!W(e.toString))?JSON.stringify(e,mh,2):String(e),mh=(e,t)=>t&&t.__v_isRef?mh(e,t.value):zn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[lo(r,i)+" =>"]=s,n),{})}:uh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>lo(n))}:fr(t)?lo(t):_t(t)&&!K(t)&&!dh(t)?String(t):t,lo=(e,t="")=>{var n;return fr(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ce;class Qp{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ce,!t&&ce&&(this.index=(ce.scopes||(ce.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=ce;try{return ce=this,t()}finally{ce=n}}}on(){ce=this}off(){ce=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Wp(e,t=ce){t&&t.active&&t.effects.push(e)}function Yp(){return ce}let vn;class Ua{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Wp(this,s)}get dirty(){if(this._dirtyLevel===1){Sn();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(Xp(n.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),Cn()}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Je,n=vn;try{return Je=!0,vn=this,this._runnings++,lc(this),this.fn()}finally{cc(this),this._runnings--,vn=n,Je=t}}stop(){var t;this.active&&(lc(this),cc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Xp(e){return e.value}function lc(e){e._trackId++,e._depsLength=0}function cc(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)_h(e.deps[t],e);e.deps.length=e._depsLength}}function _h(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Je=!0,Oo=0;const yh=[];function Sn(){yh.push(Je),Je=!1}function Cn(){const e=yh.pop();Je=e===void 0?!0:e}function Ba(){Oo++}function $a(){for(Oo--;!Oo&&Mo.length;)Mo.shift()()}function vh(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&_h(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Mo=[];function Eh(e,t,n){Ba();for(const r of e.keys())if(r._dirtyLevel<t&&e.get(r)===r._trackId){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(r._shouldSchedule=!0,r.trigger())}wh(e),$a()}function wh(e){for(const t of e.keys())t.scheduler&&t._shouldSchedule&&(!t._runnings||t.allowRecurse)&&e.get(t)===t._trackId&&(t._shouldSchedule=!1,Mo.push(t.scheduler))}const Th=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Lo=new WeakMap,En=Symbol(""),Fo=Symbol("");function Zt(e,t,n){if(Je&&vn){let r=Lo.get(e);r||Lo.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Th(()=>r.delete(n))),vh(vn,s)}}function Le(e,t,n,r,s,i){const o=Lo.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&K(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!fr(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":K(e)?Ma(n)&&a.push(o.get("length")):(a.push(o.get(En)),zn(e)&&a.push(o.get(Fo)));break;case"delete":K(e)||(a.push(o.get(En)),zn(e)&&a.push(o.get(Fo)));break;case"set":zn(e)&&a.push(o.get(En));break}Ba();for(const l of a)l&&Eh(l,2);$a()}const Jp=ka("__proto__,__v_isRef,__isVue"),Ih=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(fr)),uc=Zp();function Zp(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=st(this);for(let i=0,o=this.length;i<o;i++)Zt(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(st)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Sn(),Ba();const r=st(this)[t].apply(this,n);return $a(),Cn(),r}}),e}function tg(e){const t=st(this);return Zt(t,"has",e),t.hasOwnProperty(e)}class Ah{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?dg:Sh:i?Ph:Rh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=K(t);if(!s){if(o&&tt(uc,n))return Reflect.get(uc,n,r);if(n==="hasOwnProperty")return tg}const a=Reflect.get(t,n,r);return(fr(n)?Ih.has(n):Jp(n))||(s||Zt(t,"get",n),i)?a:te(a)?o&&Ma(n)?a:a.value:_t(a)?s?xh(a):bi(a):a}}class bh extends Ah{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const l=tr(i);if(!ti(r)&&!tr(r)&&(i=st(i),r=st(r)),!K(t)&&te(i)&&!te(r))return l?!1:(i.value=r,!0)}const o=K(t)&&Ma(n)?Number(n)<t.length:tt(t,n),a=Reflect.set(t,n,r,s);return t===st(s)&&(o?nn(r,i)&&Le(t,"set",n,r):Le(t,"add",n,r)),a}deleteProperty(t,n){const r=tt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Le(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!fr(n)||!Ih.has(n))&&Zt(t,"has",n),r}ownKeys(t){return Zt(t,"iterate",K(t)?"length":En),Reflect.ownKeys(t)}}class eg extends Ah{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ng=new bh,rg=new eg,sg=new bh(!0),ja=e=>e,Ai=e=>Reflect.getPrototypeOf(e);function Ps(e,t,n=!1,r=!1){e=e.__v_raw;const s=st(e),i=st(t);n||(nn(t,i)&&Zt(s,"get",t),Zt(s,"get",i));const{has:o}=Ai(s),a=r?ja:n?Ha:zr;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function Ss(e,t=!1){const n=this.__v_raw,r=st(n),s=st(e);return t||(nn(e,s)&&Zt(r,"has",e),Zt(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Cs(e,t=!1){return e=e.__v_raw,!t&&Zt(st(e),"iterate",En),Reflect.get(e,"size",e)}function hc(e){e=st(e);const t=st(this);return Ai(t).has.call(t,e)||(t.add(e),Le(t,"add",e,e)),this}function fc(e,t){t=st(t);const n=st(this),{has:r,get:s}=Ai(n);let i=r.call(n,e);i||(e=st(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?nn(t,o)&&Le(n,"set",e,t):Le(n,"add",e,t),this}function dc(e){const t=st(this),{has:n,get:r}=Ai(t);let s=n.call(t,e);s||(e=st(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Le(t,"delete",e,void 0),i}function pc(){const e=st(this),t=e.size!==0,n=e.clear();return t&&Le(e,"clear",void 0,void 0),n}function xs(e,t){return function(r,s){const i=this,o=i.__v_raw,a=st(o),l=t?ja:e?Ha:zr;return!e&&Zt(a,"iterate",En),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function Vs(e,t,n){return function(...r){const s=this.__v_raw,i=st(s),o=zn(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?ja:t?Ha:zr;return!t&&Zt(i,"iterate",l?Fo:En),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ze(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ig(){const e={get(i){return Ps(this,i)},get size(){return Cs(this)},has:Ss,add:hc,set:fc,delete:dc,clear:pc,forEach:xs(!1,!1)},t={get(i){return Ps(this,i,!1,!0)},get size(){return Cs(this)},has:Ss,add:hc,set:fc,delete:dc,clear:pc,forEach:xs(!1,!0)},n={get(i){return Ps(this,i,!0)},get size(){return Cs(this,!0)},has(i){return Ss.call(this,i,!0)},add:ze("add"),set:ze("set"),delete:ze("delete"),clear:ze("clear"),forEach:xs(!0,!1)},r={get(i){return Ps(this,i,!0,!0)},get size(){return Cs(this,!0)},has(i){return Ss.call(this,i,!0)},add:ze("add"),set:ze("set"),delete:ze("delete"),clear:ze("clear"),forEach:xs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Vs(i,!1,!1),n[i]=Vs(i,!0,!1),t[i]=Vs(i,!1,!0),r[i]=Vs(i,!0,!0)}),[e,n,t,r]}const[og,ag,lg,cg]=ig();function qa(e,t){const n=t?e?cg:lg:e?ag:og;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(tt(n,s)&&s in r?n:r,s,i)}const ug={get:qa(!1,!1)},hg={get:qa(!1,!0)},fg={get:qa(!0,!1)},Rh=new WeakMap,Ph=new WeakMap,Sh=new WeakMap,dg=new WeakMap;function pg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gg(e){return e.__v_skip||!Object.isExtensible(e)?0:pg(Fp(e))}function bi(e){return tr(e)?e:za(e,!1,ng,ug,Rh)}function Ch(e){return za(e,!1,sg,hg,Ph)}function xh(e){return za(e,!0,rg,fg,Sh)}function za(e,t,n,r,s){if(!_t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=gg(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function Hn(e){return tr(e)?Hn(e.__v_raw):!!(e&&e.__v_isReactive)}function tr(e){return!!(e&&e.__v_isReadonly)}function ti(e){return!!(e&&e.__v_isShallow)}function Vh(e){return Hn(e)||tr(e)}function st(e){const t=e&&e.__v_raw;return t?st(t):e}function Dh(e){return Js(e,"__v_skip",!0),e}const zr=e=>_t(e)?bi(e):e,Ha=e=>_t(e)?xh(e):e;class kh{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ua(()=>t(this._value),()=>js(this,1),()=>this.dep&&wh(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=st(this);return(!t._cacheable||t.effect.dirty)&&nn(t._value,t._value=t.effect.run())&&js(t,2),Nh(t),t.effect._dirtyLevel>=1&&js(t,1),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function mg(e,t,n=!1){let r,s;const i=W(e);return i?(r=e,s=ae):(r=e.get,s=e.set),new kh(r,s,i||!s,n)}function Nh(e){Je&&vn&&(e=st(e),vh(vn,e.dep||(e.dep=Th(()=>e.dep=void 0,e instanceof kh?e:void 0))))}function js(e,t=2,n){e=st(e);const r=e.dep;r&&Eh(r,t)}function te(e){return!!(e&&e.__v_isRef===!0)}function _g(e){return Oh(e,!1)}function yg(e){return Oh(e,!0)}function Oh(e,t){return te(e)?e:new vg(e,t)}class vg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:st(t),this._value=n?t:zr(t)}get value(){return Nh(this),this._value}set value(t){const n=this.__v_isShallow||ti(t)||tr(t);t=n?t:st(t),nn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:zr(t),js(this,2))}}function Kn(e){return te(e)?e.value:e}const Eg={get:(e,t,n)=>Kn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return te(s)&&!te(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Mh(e){return Hn(e)?e:new Proxy(e,Eg)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ze(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){Ri(i,t,n)}return s}function de(e,t,n,r){if(W(e)){const i=Ze(e,t,n,r);return i&&hh(i)&&i.catch(o=>{Ri(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(de(e[i],t,n,r));return s}function Ri(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){Ze(l,null,10,[e,o,a]);return}}wg(e,n,s,r)}function wg(e,t,n,r=!0){console.error(e)}let Hr=!1,Uo=!1;const jt=[];let Te=0;const Gn=[];let Ke=null,dn=0;const Lh=Promise.resolve();let Ka=null;function Fh(e){const t=Ka||Lh;return e?t.then(this?e.bind(this):e):t}function Tg(e){let t=Te+1,n=jt.length;for(;t<n;){const r=t+n>>>1,s=jt[r],i=Kr(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function Ga(e){(!jt.length||!jt.includes(e,Hr&&e.allowRecurse?Te+1:Te))&&(e.id==null?jt.push(e):jt.splice(Tg(e.id),0,e),Uh())}function Uh(){!Hr&&!Uo&&(Uo=!0,Ka=Lh.then($h))}function Ig(e){const t=jt.indexOf(e);t>Te&&jt.splice(t,1)}function Ag(e){K(e)?Gn.push(...e):(!Ke||!Ke.includes(e,e.allowRecurse?dn+1:dn))&&Gn.push(e),Uh()}function gc(e,t,n=Hr?Te+1:0){for(;n<jt.length;n++){const r=jt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;jt.splice(n,1),n--,r()}}}function Bh(e){if(Gn.length){const t=[...new Set(Gn)].sort((n,r)=>Kr(n)-Kr(r));if(Gn.length=0,Ke){Ke.push(...t);return}for(Ke=t,dn=0;dn<Ke.length;dn++)Ke[dn]();Ke=null,dn=0}}const Kr=e=>e.id==null?1/0:e.id,bg=(e,t)=>{const n=Kr(e)-Kr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function $h(e){Uo=!1,Hr=!0,jt.sort(bg);try{for(Te=0;Te<jt.length;Te++){const t=jt[Te];t&&t.active!==!1&&Ze(t,null,14)}}finally{Te=0,jt.length=0,Bh(),Hr=!1,Ka=null,(jt.length||Gn.length)&&$h()}}function Rg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||mt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||mt;d&&(s=n.map(g=>Rt(g)?g.trim():g)),h&&(s=n.map($p))}let a,l=r[a=oo(t)]||r[a=oo(xe(t))];!l&&i&&(l=r[a=oo(dr(t))]),l&&de(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,de(c,e,6,s)}}function jh(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!W(e)){const l=c=>{const u=jh(c,t,!0);u&&(a=!0,Lt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(_t(e)&&r.set(e,null),null):(K(i)?i.forEach(l=>o[l]=null):Lt(o,i),_t(e)&&r.set(e,o),o)}function Pi(e,t){return!e||!Ei(t)?!1:(t=t.slice(2).replace(/Once$/,""),tt(e,t[0].toLowerCase()+t.slice(1))||tt(e,dr(t))||tt(e,t))}let he=null,qh=null;function ei(e){const t=he;return he=e,qh=e&&e.type.__scopeId||null,t}function Bo(e,t=he,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Pc(-1);const i=ei(t);let o;try{o=e(...s)}finally{ei(i),r._d&&Pc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function co(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:g,ctx:I,inheritAttrs:S}=e;let A,V;const F=ei(e);try{if(n.shapeFlag&4){const Y=s||r,ft=Y;A=we(u.call(ft,Y,h,i,g,d,I)),V=l}else{const Y=t;A=we(Y.length>1?Y(i,{attrs:l,slots:a,emit:c}):Y(i,null)),V=t.props?l:Pg(l)}}catch(Y){Or.length=0,Ri(Y,e,1),A=Wt(Gr)}let B=A;if(V&&S!==!1){const Y=Object.keys(V),{shapeFlag:ft}=B;Y.length&&ft&7&&(o&&Y.some(Na)&&(V=Sg(V,o)),B=er(B,V))}return n.dirs&&(B=er(B),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&(B.transition=n.transition),A=B,ei(F),A}const Pg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ei(n))&&((t||(t={}))[n]=e[n]);return t},Sg=(e,t)=>{const n={};for(const r in e)(!Na(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Cg(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?mc(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Pi(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?mc(r,o,c):!0:!!o;return!1}function mc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Pi(n,i))return!0}return!1}function xg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const zh="components";function _c(e,t){return Dg(zh,e,!0,t)||e}const Vg=Symbol.for("v-ndc");function Dg(e,t,n=!0,r=!1){const s=he||qt;if(s){const i=s.type;if(e===zh){const a=Rm(i,!1);if(a&&(a===t||a===xe(t)||a===Ii(xe(t))))return i}const o=yc(s[e]||i[e],t)||yc(s.appContext[e],t);return!o&&r?i:o}}function yc(e,t){return e&&(e[t]||e[xe(t)]||e[Ii(xe(t))])}const kg=e=>e.__isSuspense;function Ng(e,t){t&&t.pendingBranch?K(e)?t.effects.push(...e):t.effects.push(e):Ag(e)}const Og=Symbol.for("v-scx"),Mg=()=>Fe(Og),Ds={};function qs(e,t,n){return Hh(e,t,n)}function Hh(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=mt){if(t&&i){const q=t;t=(...wt)=>{q(...wt),ft()}}const l=qt,c=q=>r===!0?q:$n(q,r===!1?1:void 0);let u,h=!1,d=!1;if(te(e)?(u=()=>e.value,h=ti(e)):Hn(e)?(u=()=>c(e),h=!0):K(e)?(d=!0,h=e.some(q=>Hn(q)||ti(q)),u=()=>e.map(q=>{if(te(q))return q.value;if(Hn(q))return c(q);if(W(q))return Ze(q,l,2)})):W(e)?t?u=()=>Ze(e,l,2):u=()=>(g&&g(),de(e,l,3,[I])):u=ae,t&&r){const q=u;u=()=>$n(q())}let g,I=q=>{g=B.onStop=()=>{Ze(q,l,4),g=B.onStop=void 0}},S;if(Di)if(I=ae,t?n&&de(t,l,3,[u(),d?[]:void 0,I]):u(),s==="sync"){const q=Mg();S=q.__watcherHandles||(q.__watcherHandles=[])}else return ae;let A=d?new Array(e.length).fill(Ds):Ds;const V=()=>{if(!(!B.active||!B.dirty))if(t){const q=B.run();(r||h||(d?q.some((wt,ee)=>nn(wt,A[ee])):nn(q,A)))&&(g&&g(),de(t,l,3,[q,A===Ds?void 0:d&&A[0]===Ds?[]:A,I]),A=q)}else B.run()};V.allowRecurse=!!t;let F;s==="sync"?F=V:s==="post"?F=()=>Jt(V,l&&l.suspense):(V.pre=!0,l&&(V.id=l.uid),F=()=>Ga(V));const B=new Ua(u,ae,F),Y=Yp(),ft=()=>{B.stop(),Y&&Oa(Y.effects,B)};return t?n?V():A=B.run():s==="post"?Jt(B.run.bind(B),l&&l.suspense):B.run(),S&&S.push(ft),ft}function Lg(e,t,n){const r=this.proxy,s=Rt(e)?e.includes(".")?Kh(r,e):()=>r[e]:e.bind(r,r);let i;W(t)?i=t:(i=t.handler,n=t);const o=fs(this),a=Hh(s,i.bind(r),n);return o(),a}function Kh(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function $n(e,t,n=0,r){if(!_t(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),te(e))$n(e.value,t,n,r);else if(K(e))for(let s=0;s<e.length;s++)$n(e[s],t,n,r);else if(uh(e)||zn(e))e.forEach(s=>{$n(s,t,n,r)});else if(dh(e))for(const s in e)$n(e[s],t,n,r);return e}function un(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Sn(),de(l,n,8,[e.el,a,e,t]),Cn())}}/*! #__NO_SIDE_EFFECTS__ */function Si(e,t){return W(e)?Lt({name:e.name},t,{setup:e}):e}const zs=e=>!!e.type.__asyncLoader,Gh=e=>e.type.__isKeepAlive;function Fg(e,t){Qh(e,"a",t)}function Ug(e,t){Qh(e,"da",t)}function Qh(e,t,n=qt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ci(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Gh(s.parent.vnode)&&Bg(r,t,n,s),s=s.parent}}function Bg(e,t,n,r){const s=Ci(t,e,r,!0);Qa(()=>{Oa(r[t],s)},n)}function Ci(e,t,n=qt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Sn();const a=fs(n),l=de(t,n,e,o);return a(),Cn(),l});return r?s.unshift(i):s.push(i),i}}const Be=e=>(t,n=qt)=>(!Di||e==="sp")&&Ci(e,(...r)=>t(...r),n),$g=Be("bm"),jg=Be("m"),qg=Be("bu"),zg=Be("u"),Hg=Be("bum"),Qa=Be("um"),Kg=Be("sp"),Gg=Be("rtg"),Qg=Be("rtc");function Wg(e,t=qt){Ci("ec",e,t)}function $o(e,t,n,r){let s;const i=n&&n[r];if(K(e)||Rt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(_t(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const jo=e=>e?of(e)?Za(e)||e.proxy:jo(e.parent):null,Nr=Lt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jo(e.parent),$root:e=>jo(e.root),$emit:e=>e.emit,$options:e=>Wa(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Ga(e.update)}),$nextTick:e=>e.n||(e.n=Fh.bind(e.proxy)),$watch:e=>Lg.bind(e)}),uo=(e,t)=>e!==mt&&!e.__isScriptSetup&&tt(e,t),Yg={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(uo(r,t))return o[t]=1,r[t];if(s!==mt&&tt(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&tt(c,t))return o[t]=3,i[t];if(n!==mt&&tt(n,t))return o[t]=4,n[t];qo&&(o[t]=0)}}const u=Nr[t];let h,d;if(u)return t==="$attrs"&&Zt(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==mt&&tt(n,t))return o[t]=4,n[t];if(d=l.config.globalProperties,tt(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return uo(s,t)?(s[t]=n,!0):r!==mt&&tt(r,t)?(r[t]=n,!0):tt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==mt&&tt(e,o)||uo(t,o)||(a=i[0])&&tt(a,o)||tt(r,o)||tt(Nr,o)||tt(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:tt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function vc(e){return K(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let qo=!0;function Xg(e){const t=Wa(e),n=e.proxy,r=e.ctx;qo=!1,t.beforeCreate&&Ec(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:g,updated:I,activated:S,deactivated:A,beforeDestroy:V,beforeUnmount:F,destroyed:B,unmounted:Y,render:ft,renderTracked:q,renderTriggered:wt,errorCaptured:ee,serverPrefetch:$e,expose:ne,inheritAttrs:je,components:cn,directives:_e,filters:wr}=t;if(c&&Jg(c,r,null),o)for(const ut in o){const it=o[ut];W(it)&&(r[ut]=it.bind(n))}if(s){const ut=s.call(n,n);_t(ut)&&(e.data=bi(ut))}if(qo=!0,i)for(const ut in i){const it=i[ut],Ne=W(it)?it.bind(n,n):W(it.get)?it.get.bind(n,n):ae,qe=!W(it)&&W(it.set)?it.set.bind(n):ae,ye=ue({get:Ne,set:qe});Object.defineProperty(r,ut,{enumerable:!0,configurable:!0,get:()=>ye.value,set:Xt=>ye.value=Xt})}if(a)for(const ut in a)Wh(a[ut],r,n,ut);if(l){const ut=W(l)?l.call(n):l;Reflect.ownKeys(ut).forEach(it=>{Hs(it,ut[it])})}u&&Ec(u,e,"c");function Pt(ut,it){K(it)?it.forEach(Ne=>ut(Ne.bind(n))):it&&ut(it.bind(n))}if(Pt($g,h),Pt(jg,d),Pt(qg,g),Pt(zg,I),Pt(Fg,S),Pt(Ug,A),Pt(Wg,ee),Pt(Qg,q),Pt(Gg,wt),Pt(Hg,F),Pt(Qa,Y),Pt(Kg,$e),K(ne))if(ne.length){const ut=e.exposed||(e.exposed={});ne.forEach(it=>{Object.defineProperty(ut,it,{get:()=>n[it],set:Ne=>n[it]=Ne})})}else e.exposed||(e.exposed={});ft&&e.render===ae&&(e.render=ft),je!=null&&(e.inheritAttrs=je),cn&&(e.components=cn),_e&&(e.directives=_e)}function Jg(e,t,n=ae){K(e)&&(e=zo(e));for(const r in e){const s=e[r];let i;_t(s)?"default"in s?i=Fe(s.from||r,s.default,!0):i=Fe(s.from||r):i=Fe(s),te(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Ec(e,t,n){de(K(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Wh(e,t,n,r){const s=r.includes(".")?Kh(n,r):()=>n[r];if(Rt(e)){const i=t[e];W(i)&&qs(s,i)}else if(W(e))qs(s,e.bind(n));else if(_t(e))if(K(e))e.forEach(i=>Wh(i,t,n,r));else{const i=W(e.handler)?e.handler.bind(n):t[e.handler];W(i)&&qs(s,i,e)}}function Wa(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>ni(l,c,o,!0)),ni(l,t,o)),_t(t)&&i.set(t,l),l}function ni(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&ni(e,i,n,!0),s&&s.forEach(o=>ni(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=Zg[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Zg={data:wc,props:Tc,emits:Tc,methods:Sr,computed:Sr,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:Sr,directives:Sr,watch:em,provide:wc,inject:tm};function wc(e,t){return t?e?function(){return Lt(W(e)?e.call(this,this):e,W(t)?t.call(this,this):t)}:t:e}function tm(e,t){return Sr(zo(e),zo(t))}function zo(e){if(K(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Qt(e,t){return e?[...new Set([].concat(e,t))]:t}function Sr(e,t){return e?Lt(Object.create(null),e,t):t}function Tc(e,t){return e?K(e)&&K(t)?[...new Set([...e,...t])]:Lt(Object.create(null),vc(e),vc(t??{})):t}function em(e,t){if(!e)return t;if(!t)return e;const n=Lt(Object.create(null),e);for(const r in t)n[r]=Qt(e[r],t[r]);return n}function Yh(){return{app:null,config:{isNativeTag:Mp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nm=0;function rm(e,t){return function(r,s=null){W(r)||(r=Lt({},r)),s!=null&&!_t(s)&&(s=null);const i=Yh(),o=new WeakSet;let a=!1;const l=i.app={_uid:nm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Sm,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&W(c.install)?(o.add(c),c.install(l,...u)):W(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const d=Wt(r,s);return d.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(d,c):e(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Za(d.component)||d.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){ri=l;try{return c()}finally{ri=null}}};return l}}let ri=null;function Hs(e,t){if(qt){let n=qt.provides;const r=qt.parent&&qt.parent.provides;r===n&&(n=qt.provides=Object.create(r)),n[e]=t}}function Fe(e,t,n=!1){const r=qt||he;if(r||ri){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ri._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&W(t)?t.call(r&&r.proxy):t}}function sm(e,t,n,r=!1){const s={},i={};Js(i,Vi,1),e.propsDefaults=Object.create(null),Xh(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Ch(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function im(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=st(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Pi(e.emitsOptions,d))continue;const g=t[d];if(l)if(tt(i,d))g!==i[d]&&(i[d]=g,c=!0);else{const I=xe(d);s[I]=Ho(l,a,I,g,e,!1)}else g!==i[d]&&(i[d]=g,c=!0)}}}else{Xh(e,t,s,i)&&(c=!0);let u;for(const h in a)(!t||!tt(t,h)&&((u=dr(h))===h||!tt(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Ho(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!tt(t,h))&&(delete i[h],c=!0)}c&&Le(e,"set","$attrs")}function Xh(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if($s(l))continue;const c=t[l];let u;s&&tt(s,u=xe(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:Pi(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=st(n),c=a||mt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Ho(s,l,h,c[h],e,!tt(c,h))}}return o}function Ho(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=tt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&W(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=fs(s);r=c[n]=l.call(null,t),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===dr(n))&&(r=!0))}return r}function Jh(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!W(e)){const u=h=>{l=!0;const[d,g]=Jh(h,t,!0);Lt(o,d),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return _t(e)&&r.set(e,qn),qn;if(K(i))for(let u=0;u<i.length;u++){const h=xe(i[u]);Ic(h)&&(o[h]=mt)}else if(i)for(const u in i){const h=xe(u);if(Ic(h)){const d=i[u],g=o[h]=K(d)||W(d)?{type:d}:Lt({},d);if(g){const I=Rc(Boolean,g.type),S=Rc(String,g.type);g[0]=I>-1,g[1]=S<0||I<S,(I>-1||tt(g,"default"))&&a.push(h)}}}const c=[o,a];return _t(e)&&r.set(e,c),c}function Ic(e){return e[0]!=="$"}function Ac(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function bc(e,t){return Ac(e)===Ac(t)}function Rc(e,t){return K(t)?t.findIndex(n=>bc(n,e)):W(t)&&bc(t,e)?0:-1}const Zh=e=>e[0]==="_"||e==="$stable",Ya=e=>K(e)?e.map(we):[we(e)],om=(e,t,n)=>{if(t._n)return t;const r=Bo((...s)=>Ya(t(...s)),n);return r._c=!1,r},tf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Zh(s))continue;const i=e[s];if(W(i))t[s]=om(s,i,r);else if(i!=null){const o=Ya(i);t[s]=()=>o}}},ef=(e,t)=>{const n=Ya(t);e.slots.default=()=>n},am=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=st(t),Js(t,"_",n)):tf(t,e.slots={})}else e.slots={},t&&ef(e,t);Js(e.slots,Vi,1)},lm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=mt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Lt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,tf(t,s)),o=t}else t&&(ef(e,t),o={default:1});if(i)for(const a in s)!Zh(a)&&o[a]==null&&delete s[a]};function Ko(e,t,n,r,s=!1){if(K(e)){e.forEach((d,g)=>Ko(d,t&&(K(t)?t[g]:t),n,r,s));return}if(zs(r)&&!s)return;const i=r.shapeFlag&4?Za(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===mt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Rt(c)?(u[c]=null,tt(h,c)&&(h[c]=null)):te(c)&&(c.value=null)),W(l))Ze(l,a,12,[o,u]);else{const d=Rt(l),g=te(l),I=e.f;if(d||g){const S=()=>{if(I){const A=d?tt(h,l)?h[l]:u[l]:l.value;s?K(A)&&Oa(A,i):K(A)?A.includes(i)||A.push(i):d?(u[l]=[i],tt(h,l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else d?(u[l]=o,tt(h,l)&&(h[l]=o)):g&&(l.value=o,e.k&&(u[e.k]=o))};s||I?S():(S.id=-1,Jt(S,n))}}}const Jt=Ng;function cm(e){return um(e)}function um(e,t){const n=ph();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:g=ae,insertStaticContent:I}=e,S=(f,p,m,v=null,_=null,R=null,k=void 0,b=null,P=!!p.dynamicChildren)=>{if(f===p)return;f&&!Ir(f,p)&&(v=y(f),Xt(f,_,R,!0),f=null),p.patchFlag===-2&&(P=!1,p.dynamicChildren=null);const{type:w,ref:O,shapeFlag:$}=p;switch(w){case xi:A(f,p,m,v);break;case Gr:V(f,p,m,v);break;case Ks:f==null&&F(p,m,v,k);break;case se:cn(f,p,m,v,_,R,k,b,P);break;default:$&1?ft(f,p,m,v,_,R,k,b,P):$&6?_e(f,p,m,v,_,R,k,b,P):($&64||$&128)&&w.process(f,p,m,v,_,R,k,b,P,L)}O!=null&&_&&Ko(O,f&&f.ref,R,p||f,!p)},A=(f,p,m,v)=>{if(f==null)r(p.el=a(p.children),m,v);else{const _=p.el=f.el;p.children!==f.children&&c(_,p.children)}},V=(f,p,m,v)=>{f==null?r(p.el=l(p.children||""),m,v):p.el=f.el},F=(f,p,m,v)=>{[f.el,f.anchor]=I(f.children,p,m,v,f.el,f.anchor)},B=({el:f,anchor:p},m,v)=>{let _;for(;f&&f!==p;)_=d(f),r(f,m,v),f=_;r(p,m,v)},Y=({el:f,anchor:p})=>{let m;for(;f&&f!==p;)m=d(f),s(f),f=m;s(p)},ft=(f,p,m,v,_,R,k,b,P)=>{p.type==="svg"?k="svg":p.type==="math"&&(k="mathml"),f==null?q(p,m,v,_,R,k,b,P):$e(f,p,_,R,k,b,P)},q=(f,p,m,v,_,R,k,b)=>{let P,w;const{props:O,shapeFlag:$,transition:U,dirs:H}=f;if(P=f.el=o(f.type,R,O&&O.is,O),$&8?u(P,f.children):$&16&&ee(f.children,P,null,v,_,ho(f,R),k,b),H&&un(f,null,v,"created"),wt(P,f,f.scopeId,k,v),O){for(const ht in O)ht!=="value"&&!$s(ht)&&i(P,ht,null,O[ht],R,f.children,v,_,Ft);"value"in O&&i(P,"value",null,O.value,R),(w=O.onVnodeBeforeMount)&&Ee(w,v,f)}H&&un(f,null,v,"beforeMount");const J=hm(_,U);J&&U.beforeEnter(P),r(P,p,m),((w=O&&O.onVnodeMounted)||J||H)&&Jt(()=>{w&&Ee(w,v,f),J&&U.enter(P),H&&un(f,null,v,"mounted")},_)},wt=(f,p,m,v,_)=>{if(m&&g(f,m),v)for(let R=0;R<v.length;R++)g(f,v[R]);if(_){let R=_.subTree;if(p===R){const k=_.vnode;wt(f,k,k.scopeId,k.slotScopeIds,_.parent)}}},ee=(f,p,m,v,_,R,k,b,P=0)=>{for(let w=P;w<f.length;w++){const O=f[w]=b?Ge(f[w]):we(f[w]);S(null,O,p,m,v,_,R,k,b)}},$e=(f,p,m,v,_,R,k)=>{const b=p.el=f.el;let{patchFlag:P,dynamicChildren:w,dirs:O}=p;P|=f.patchFlag&16;const $=f.props||mt,U=p.props||mt;let H;if(m&&hn(m,!1),(H=U.onVnodeBeforeUpdate)&&Ee(H,m,p,f),O&&un(p,f,m,"beforeUpdate"),m&&hn(m,!0),w?ne(f.dynamicChildren,w,b,m,v,ho(p,_),R):k||it(f,p,b,null,m,v,ho(p,_),R,!1),P>0){if(P&16)je(b,p,$,U,m,v,_);else if(P&2&&$.class!==U.class&&i(b,"class",null,U.class,_),P&4&&i(b,"style",$.style,U.style,_),P&8){const J=p.dynamicProps;for(let ht=0;ht<J.length;ht++){const gt=J[ht],St=$[gt],le=U[gt];(le!==St||gt==="value")&&i(b,gt,St,le,_,f.children,m,v,Ft)}}P&1&&f.children!==p.children&&u(b,p.children)}else!k&&w==null&&je(b,p,$,U,m,v,_);((H=U.onVnodeUpdated)||O)&&Jt(()=>{H&&Ee(H,m,p,f),O&&un(p,f,m,"updated")},v)},ne=(f,p,m,v,_,R,k)=>{for(let b=0;b<p.length;b++){const P=f[b],w=p[b],O=P.el&&(P.type===se||!Ir(P,w)||P.shapeFlag&70)?h(P.el):m;S(P,w,O,null,v,_,R,k,!0)}},je=(f,p,m,v,_,R,k)=>{if(m!==v){if(m!==mt)for(const b in m)!$s(b)&&!(b in v)&&i(f,b,m[b],null,k,p.children,_,R,Ft);for(const b in v){if($s(b))continue;const P=v[b],w=m[b];P!==w&&b!=="value"&&i(f,b,w,P,k,p.children,_,R,Ft)}"value"in v&&i(f,"value",m.value,v.value,k)}},cn=(f,p,m,v,_,R,k,b,P)=>{const w=p.el=f?f.el:a(""),O=p.anchor=f?f.anchor:a("");let{patchFlag:$,dynamicChildren:U,slotScopeIds:H}=p;H&&(b=b?b.concat(H):H),f==null?(r(w,m,v),r(O,m,v),ee(p.children||[],m,O,_,R,k,b,P)):$>0&&$&64&&U&&f.dynamicChildren?(ne(f.dynamicChildren,U,m,_,R,k,b),(p.key!=null||_&&p===_.subTree)&&nf(f,p,!0)):it(f,p,m,O,_,R,k,b,P)},_e=(f,p,m,v,_,R,k,b,P)=>{p.slotScopeIds=b,f==null?p.shapeFlag&512?_.ctx.activate(p,m,v,k,P):wr(p,m,v,_,R,k,P):Dn(f,p,P)},wr=(f,p,m,v,_,R,k)=>{const b=f.component=wm(f,v,_);if(Gh(f)&&(b.ctx.renderer=L),Tm(b),b.asyncDep){if(_&&_.registerDep(b,Pt),!f.el){const P=b.subTree=Wt(Gr);V(null,P,p,m)}}else Pt(b,f,p,m,_,R,k)},Dn=(f,p,m)=>{const v=p.component=f.component;if(Cg(f,p,m))if(v.asyncDep&&!v.asyncResolved){ut(v,p,m);return}else v.next=p,Ig(v.update),v.effect.dirty=!0,v.update();else p.el=f.el,v.vnode=p},Pt=(f,p,m,v,_,R,k)=>{const b=()=>{if(f.isMounted){let{next:O,bu:$,u:U,parent:H,vnode:J}=f;{const On=rf(f);if(On){O&&(O.el=J.el,ut(f,O,k)),On.asyncDep.then(()=>{f.isUnmounted||b()});return}}let ht=O,gt;hn(f,!1),O?(O.el=J.el,ut(f,O,k)):O=J,$&&ao($),(gt=O.props&&O.props.onVnodeBeforeUpdate)&&Ee(gt,H,O,J),hn(f,!0);const St=co(f),le=f.subTree;f.subTree=St,S(le,St,h(le.el),y(le),f,_,R),O.el=St.el,ht===null&&xg(f,St.el),U&&Jt(U,_),(gt=O.props&&O.props.onVnodeUpdated)&&Jt(()=>Ee(gt,H,O,J),_)}else{let O;const{el:$,props:U}=p,{bm:H,m:J,parent:ht}=f,gt=zs(p);if(hn(f,!1),H&&ao(H),!gt&&(O=U&&U.onVnodeBeforeMount)&&Ee(O,ht,p),hn(f,!0),$&&pt){const St=()=>{f.subTree=co(f),pt($,f.subTree,f,_,null)};gt?p.type.__asyncLoader().then(()=>!f.isUnmounted&&St()):St()}else{const St=f.subTree=co(f);S(null,St,m,v,f,_,R),p.el=St.el}if(J&&Jt(J,_),!gt&&(O=U&&U.onVnodeMounted)){const St=p;Jt(()=>Ee(O,ht,St),_)}(p.shapeFlag&256||ht&&zs(ht.vnode)&&ht.vnode.shapeFlag&256)&&f.a&&Jt(f.a,_),f.isMounted=!0,p=m=v=null}},P=f.effect=new Ua(b,ae,()=>Ga(w),f.scope),w=f.update=()=>{P.dirty&&P.run()};w.id=f.uid,hn(f,!0),w()},ut=(f,p,m)=>{p.component=f;const v=f.vnode.props;f.vnode=p,f.next=null,im(f,p.props,v,m),lm(f,p.children,m),Sn(),gc(f),Cn()},it=(f,p,m,v,_,R,k,b,P=!1)=>{const w=f&&f.children,O=f?f.shapeFlag:0,$=p.children,{patchFlag:U,shapeFlag:H}=p;if(U>0){if(U&128){qe(w,$,m,v,_,R,k,b,P);return}else if(U&256){Ne(w,$,m,v,_,R,k,b,P);return}}H&8?(O&16&&Ft(w,_,R),$!==w&&u(m,$)):O&16?H&16?qe(w,$,m,v,_,R,k,b,P):Ft(w,_,R,!0):(O&8&&u(m,""),H&16&&ee($,m,v,_,R,k,b,P))},Ne=(f,p,m,v,_,R,k,b,P)=>{f=f||qn,p=p||qn;const w=f.length,O=p.length,$=Math.min(w,O);let U;for(U=0;U<$;U++){const H=p[U]=P?Ge(p[U]):we(p[U]);S(f[U],H,m,null,_,R,k,b,P)}w>O?Ft(f,_,R,!0,!1,$):ee(p,m,v,_,R,k,b,P,$)},qe=(f,p,m,v,_,R,k,b,P)=>{let w=0;const O=p.length;let $=f.length-1,U=O-1;for(;w<=$&&w<=U;){const H=f[w],J=p[w]=P?Ge(p[w]):we(p[w]);if(Ir(H,J))S(H,J,m,null,_,R,k,b,P);else break;w++}for(;w<=$&&w<=U;){const H=f[$],J=p[U]=P?Ge(p[U]):we(p[U]);if(Ir(H,J))S(H,J,m,null,_,R,k,b,P);else break;$--,U--}if(w>$){if(w<=U){const H=U+1,J=H<O?p[H].el:v;for(;w<=U;)S(null,p[w]=P?Ge(p[w]):we(p[w]),m,J,_,R,k,b,P),w++}}else if(w>U)for(;w<=$;)Xt(f[w],_,R,!0),w++;else{const H=w,J=w,ht=new Map;for(w=J;w<=U;w++){const re=p[w]=P?Ge(p[w]):we(p[w]);re.key!=null&&ht.set(re.key,w)}let gt,St=0;const le=U-J+1;let On=!1,sc=0;const Tr=new Array(le);for(w=0;w<le;w++)Tr[w]=0;for(w=H;w<=$;w++){const re=f[w];if(St>=le){Xt(re,_,R,!0);continue}let ve;if(re.key!=null)ve=ht.get(re.key);else for(gt=J;gt<=U;gt++)if(Tr[gt-J]===0&&Ir(re,p[gt])){ve=gt;break}ve===void 0?Xt(re,_,R,!0):(Tr[ve-J]=w+1,ve>=sc?sc=ve:On=!0,S(re,p[ve],m,null,_,R,k,b,P),St++)}const ic=On?fm(Tr):qn;for(gt=ic.length-1,w=le-1;w>=0;w--){const re=J+w,ve=p[re],oc=re+1<O?p[re+1].el:v;Tr[w]===0?S(null,ve,m,oc,_,R,k,b,P):On&&(gt<0||w!==ic[gt]?ye(ve,m,oc,2):gt--)}}},ye=(f,p,m,v,_=null)=>{const{el:R,type:k,transition:b,children:P,shapeFlag:w}=f;if(w&6){ye(f.component.subTree,p,m,v);return}if(w&128){f.suspense.move(p,m,v);return}if(w&64){k.move(f,p,m,L);return}if(k===se){r(R,p,m);for(let $=0;$<P.length;$++)ye(P[$],p,m,v);r(f.anchor,p,m);return}if(k===Ks){B(f,p,m);return}if(v!==2&&w&1&&b)if(v===0)b.beforeEnter(R),r(R,p,m),Jt(()=>b.enter(R),_);else{const{leave:$,delayLeave:U,afterLeave:H}=b,J=()=>r(R,p,m),ht=()=>{$(R,()=>{J(),H&&H()})};U?U(R,J,ht):ht()}else r(R,p,m)},Xt=(f,p,m,v=!1,_=!1)=>{const{type:R,props:k,ref:b,children:P,dynamicChildren:w,shapeFlag:O,patchFlag:$,dirs:U}=f;if(b!=null&&Ko(b,null,m,f,!0),O&256){p.ctx.deactivate(f);return}const H=O&1&&U,J=!zs(f);let ht;if(J&&(ht=k&&k.onVnodeBeforeUnmount)&&Ee(ht,p,f),O&6)Rs(f.component,m,v);else{if(O&128){f.suspense.unmount(m,v);return}H&&un(f,null,p,"beforeUnmount"),O&64?f.type.remove(f,p,m,_,L,v):w&&(R!==se||$>0&&$&64)?Ft(w,p,m,!1,!0):(R===se&&$&384||!_&&O&16)&&Ft(P,p,m),v&&kn(f)}(J&&(ht=k&&k.onVnodeUnmounted)||H)&&Jt(()=>{ht&&Ee(ht,p,f),H&&un(f,null,p,"unmounted")},m)},kn=f=>{const{type:p,el:m,anchor:v,transition:_}=f;if(p===se){Nn(m,v);return}if(p===Ks){Y(f);return}const R=()=>{s(m),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(f.shapeFlag&1&&_&&!_.persisted){const{leave:k,delayLeave:b}=_,P=()=>k(m,R);b?b(f.el,R,P):P()}else R()},Nn=(f,p)=>{let m;for(;f!==p;)m=d(f),s(f),f=m;s(p)},Rs=(f,p,m)=>{const{bum:v,scope:_,update:R,subTree:k,um:b}=f;v&&ao(v),_.stop(),R&&(R.active=!1,Xt(k,f,p,m)),b&&Jt(b,p),Jt(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Ft=(f,p,m,v=!1,_=!1,R=0)=>{for(let k=R;k<f.length;k++)Xt(f[k],p,m,v,_)},y=f=>f.shapeFlag&6?y(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el);let N=!1;const D=(f,p,m)=>{f==null?p._vnode&&Xt(p._vnode,null,null,!0):S(p._vnode||null,f,p,null,null,null,m),N||(N=!0,gc(),Bh(),N=!1),p._vnode=f},L={p:S,um:Xt,m:ye,r:kn,mt:wr,mc:ee,pc:it,pbc:ne,n:y,o:e};let ot,pt;return t&&([ot,pt]=t(L)),{render:D,hydrate:ot,createApp:rm(D,ot)}}function ho({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function hn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function hm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function nf(e,t,n=!1){const r=e.children,s=t.children;if(K(r)&&K(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ge(s[i]),a.el=o.el),n||nf(o,a)),a.type===xi&&(a.el=o.el)}}function fm(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function rf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:rf(t)}const dm=e=>e.__isTeleport,se=Symbol.for("v-fgt"),xi=Symbol.for("v-txt"),Gr=Symbol.for("v-cmt"),Ks=Symbol.for("v-stc"),Or=[];let fe=null;function Ie(e=!1){Or.push(fe=e?null:[])}function pm(){Or.pop(),fe=Or[Or.length-1]||null}let Qr=1;function Pc(e){Qr+=e}function gm(e){return e.dynamicChildren=Qr>0?fe||qn:null,pm(),Qr>0&&fe&&fe.push(e),e}function Ae(e,t,n,r,s,i){return gm(X(e,t,n,r,s,i,!0))}function Go(e){return e?e.__v_isVNode===!0:!1}function Ir(e,t){return e.type===t.type&&e.key===t.key}const Vi="__vInternal",sf=({key:e})=>e??null,Gs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Rt(e)||te(e)||W(e)?{i:he,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,r=0,s=null,i=e===se?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sf(t),ref:t&&Gs(t),scopeId:qh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:he};return a?(Ja(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=Rt(n)?8:16),Qr>0&&!o&&fe&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&fe.push(l),l}const Wt=mm;function mm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Vg)&&(e=Gr),Go(e)){const a=er(e,t,!0);return n&&Ja(a,n),Qr>0&&!i&&fe&&(a.shapeFlag&6?fe[fe.indexOf(e)]=a:fe.push(a)),a.patchFlag|=-2,a}if(Pm(e)&&(e=e.__vccOpts),t){t=_m(t);let{class:a,style:l}=t;a&&!Rt(a)&&(t.class=Fa(a)),_t(l)&&(Vh(l)&&!K(l)&&(l=Lt({},l)),t.style=La(l))}const o=Rt(e)?1:kg(e)?128:dm(e)?64:_t(e)?4:W(e)?2:0;return X(e,t,n,r,s,o,i,!0)}function _m(e){return e?Vh(e)||Vi in e?Lt({},e):e:null}function er(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?ym(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&sf(a),ref:t&&t.ref?n&&s?K(s)?s.concat(Gs(t)):[s,Gs(t)]:Gs(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==se?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&er(e.ssContent),ssFallback:e.ssFallback&&er(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Qo(e=" ",t=0){return Wt(xi,null,e,t)}function Xa(e,t){const n=Wt(Ks,null,e);return n.staticCount=t,n}function we(e){return e==null||typeof e=="boolean"?Wt(Gr):K(e)?Wt(se,null,e.slice()):typeof e=="object"?Ge(e):Wt(xi,null,String(e))}function Ge(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:er(e)}function Ja(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(K(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Ja(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Vi in t)?t._ctx=he:s===3&&he&&(he.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else W(t)?(t={default:t,_ctx:he},n=32):(t=String(t),r&64?(n=16,t=[Qo(t)]):n=8);e.children=t,e.shapeFlag|=n}function ym(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Fa([t.class,r.class]));else if(s==="style")t.style=La([t.style,r.style]);else if(Ei(s)){const i=t[s],o=r[s];o&&i!==o&&!(K(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function Ee(e,t,n,r=null){de(e,t,7,[n,r])}const vm=Yh();let Em=0;function wm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||vm,i={uid:Em++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Qp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jh(r,s),emitsOptions:jh(r,s),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:r.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Rg.bind(null,i),e.ce&&e.ce(i),i}let qt=null,si,Wo;{const e=ph(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};si=t("__VUE_INSTANCE_SETTERS__",n=>qt=n),Wo=t("__VUE_SSR_SETTERS__",n=>Di=n)}const fs=e=>{const t=qt;return si(e),e.scope.on(),()=>{e.scope.off(),si(t)}},Sc=()=>{qt&&qt.scope.off(),si(null)};function of(e){return e.vnode.shapeFlag&4}let Di=!1;function Tm(e,t=!1){t&&Wo(t);const{props:n,children:r}=e.vnode,s=of(e);sm(e,n,s,t),am(e,r);const i=s?Im(e,t):void 0;return t&&Wo(!1),i}function Im(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Dh(new Proxy(e.ctx,Yg));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?bm(e):null,i=fs(e);Sn();const o=Ze(r,e,0,[e.props,s]);if(Cn(),i(),hh(o)){if(o.then(Sc,Sc),t)return o.then(a=>{Cc(e,a,t)}).catch(a=>{Ri(a,e,0)});e.asyncDep=o}else Cc(e,o,t)}else af(e,t)}function Cc(e,t,n){W(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_t(t)&&(e.setupState=Mh(t)),af(e,n)}let xc;function af(e,t,n){const r=e.type;if(!e.render){if(!t&&xc&&!r.render){const s=r.template||Wa(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Lt(Lt({isCustomElement:i,delimiters:a},o),l);r.render=xc(s,c)}}e.render=r.render||ae}{const s=fs(e);Sn();try{Xg(e)}finally{Cn(),s()}}}function Am(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Zt(e,"get","$attrs"),t[n]}}))}function bm(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Am(e)},slots:e.slots,emit:e.emit,expose:t}}function Za(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Mh(Dh(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Nr)return Nr[n](e)},has(t,n){return n in t||n in Nr}}))}function Rm(e,t=!0){return W(e)?e.displayName||e.name:e.name||t&&e.__name}function Pm(e){return W(e)&&"__vccOpts"in e}const ue=(e,t)=>mg(e,t,Di);function lf(e,t,n){const r=arguments.length;return r===2?_t(t)&&!K(t)?Go(t)?Wt(e,null,[t]):Wt(e,t):Wt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Go(n)&&(n=[n]),Wt(e,t,n))}const Sm="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Cm="http://www.w3.org/2000/svg",xm="http://www.w3.org/1998/Math/MathML",Qe=typeof document<"u"?document:null,Vc=Qe&&Qe.createElement("template"),Vm={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Qe.createElementNS(Cm,e):t==="mathml"?Qe.createElementNS(xm,e):Qe.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Qe.createTextNode(e),createComment:e=>Qe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Vc.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=Vc.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Dm=Symbol("_vtc");function km(e,t,n){const r=e[Dm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Nm=Symbol("_vod"),Om=Symbol("");function Mm(e,t,n){const r=e.style,s=r.display,i=Rt(n);if(n&&!i){if(t&&!Rt(t))for(const o in t)n[o]==null&&Yo(r,o,"");for(const o in n)Yo(r,o,n[o])}else if(i){if(t!==n){const o=r[Om];o&&(n+=";"+o),r.cssText=n}}else t&&e.removeAttribute("style");Nm in e&&(r.display=s)}const Dc=/\s*!important$/;function Yo(e,t,n){if(K(n))n.forEach(r=>Yo(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Lm(e,t);Dc.test(n)?e.setProperty(dr(r),n.replace(Dc,""),"important"):e[r]=n}}const kc=["Webkit","Moz","ms"],fo={};function Lm(e,t){const n=fo[t];if(n)return n;let r=xe(t);if(r!=="filter"&&r in e)return fo[t]=r;r=Ii(r);for(let s=0;s<kc.length;s++){const i=kc[s]+r;if(i in e)return fo[t]=i}return t}const Nc="http://www.w3.org/1999/xlink";function Fm(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Nc,t.slice(6,t.length)):e.setAttributeNS(Nc,t,n);else{const i=Gp(t);n==null||i&&!gh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function Um(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=gh(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Bm(e,t,n,r){e.addEventListener(t,n,r)}function $m(e,t,n,r){e.removeEventListener(t,n,r)}const Oc=Symbol("_vei");function jm(e,t,n,r,s=null){const i=e[Oc]||(e[Oc]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=qm(t);if(r){const c=i[t]=Km(r,s);Bm(e,a,c,l)}else o&&($m(e,a,o,l),i[t]=void 0)}}const Mc=/(?:Once|Passive|Capture)$/;function qm(e){let t;if(Mc.test(e)){t={};let r;for(;r=e.match(Mc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):dr(e.slice(2)),t]}let po=0;const zm=Promise.resolve(),Hm=()=>po||(zm.then(()=>po=0),po=Date.now());function Km(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;de(Gm(r,n.value),t,5,[r])};return n.value=e,n.attached=Hm(),n}function Gm(e,t){if(K(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Lc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qm=(e,t,n,r,s,i,o,a,l)=>{const c=s==="svg";t==="class"?km(e,r,c):t==="style"?Mm(e,n,r):Ei(t)?Na(t)||jm(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Wm(e,t,r,c))?Um(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Fm(e,t,r,c))};function Wm(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Lc(t)&&W(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Lc(t)&&Rt(n)?!1:t in e}const Ym=Lt({patchProp:Qm},Vm);let Fc;function Xm(){return Fc||(Fc=cm(Ym))}const Jm=(...e)=>{const t=Xm().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=t_(r);if(!s)return;const i=t._component;!W(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Zm(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Zm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function t_(e){return Rt(e)?document.querySelector(e):e}const e_=Si({data:()=>({navs:[{label:"Menu",path:"/menues"},{label:"Pesanan",path:"/orders"}]})}),ki=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},n_={class:"bg-white"},r_={class:"mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8","aria-label":"Global"},s_=Xa('<div class="flex lg:flex-1"><a href="#" class="-m-1.5 p-1.5"><span class="sr-only">Your Company</span><img class="h-8 w-auto" src="https://img.icons8.com/?size=48&amp;id=xZiTPdO57ltQ&amp;format=png" alt=""></a></div><div class="flex lg:hidden"><button type="button" class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700"><span class="sr-only">Open main menu</span><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button></div>',2),i_={class:"hidden lg:flex lg:gap-x-12"},o_={class:"lg:hidden",role:"dialog","aria-modal":"true"},a_=X("div",{class:"fixed inset-0 z-10"},null,-1),l_={class:"fixed inset-y-0 right-0 z-10 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10"},c_=Xa('<div class="flex items-center justify-between"><a href="#" class="-m-1.5 p-1.5"><span class="sr-only">Your Company</span><img class="h-8 w-auto" src="https://img.icons8.com/?size=48&amp;id=xZiTPdO57ltQ&amp;format=png" alt=""></a><button type="button" class="-m-2.5 rounded-md p-2.5 text-gray-700"><span class="sr-only">Close menu</span><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>',1),u_={class:"mt-6 flow-root"},h_={class:"-my-6 divide-y divide-gray-500/10"};function f_(e,t,n,r,s,i){const o=_c("router-link"),a=_c("router-view");return Ie(),Ae(se,null,[X("header",n_,[X("nav",r_,[s_,X("div",i_,[(Ie(!0),Ae(se,null,$o(e.navs,l=>(Ie(),Ae("div",{key:l.path},[Wt(o,{to:l.path,class:"text-sm font-semibold leading-6 text-gray-900"},{default:Bo(()=>[Qo(Zs(l.label),1)]),_:2},1032,["to"])]))),128))])]),X("div",o_,[a_,X("div",l_,[c_,X("div",u_,[X("div",h_,[(Ie(!0),Ae(se,null,$o(e.navs,l=>(Ie(),Ae("div",{key:l.path,class:"space-y-2 py-6"},[Wt(o,{to:l.path,class:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50"},{default:Bo(()=>[Qo(Zs(l.label),1)]),_:2},1032,["to"])]))),128))])])])])]),Wt(a)],64)}const d_=ki(e_,[["render",f_]]);/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ln=typeof window<"u";function p_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const lt=Object.assign;function go(e,t){const n={};for(const r in t){const s=t[r];n[r]=pe(s)?s.map(e):e(s)}return n}const Mr=()=>{},pe=Array.isArray,g_=/\/$/,m_=e=>e.replace(g_,"");function mo(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=E_(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function __(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Uc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function y_(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&nr(t.matched[r],n.matched[s])&&cf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function nr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function cf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!v_(e[n],t[n]))return!1;return!0}function v_(e,t){return pe(e)?Bc(e,t):pe(t)?Bc(t,e):e===t}function Bc(e,t){return pe(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function E_(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Wr;(function(e){e.pop="pop",e.push="push"})(Wr||(Wr={}));var Lr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Lr||(Lr={}));function w_(e){if(!e)if(Ln){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),m_(e)}const T_=/^[^#]+#/;function I_(e,t){return e.replace(T_,"#")+t}function A_(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Ni=()=>({left:window.pageXOffset,top:window.pageYOffset});function b_(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=A_(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function $c(e,t){return(history.state?history.state.position-t:-1)+e}const Xo=new Map;function R_(e,t){Xo.set(e,t)}function P_(e){const t=Xo.get(e);return Xo.delete(e),t}let S_=()=>location.protocol+"//"+location.host;function uf(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Uc(l,"")}return Uc(n,e)+r+s}function C_(e,t,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const g=uf(e,location),I=n.value,S=t.value;let A=0;if(d){if(n.value=g,t.value=d,o&&o===I){o=null;return}A=S?d.position-S.position:0}else r(g);s.forEach(V=>{V(n.value,I,{delta:A,type:Wr.pop,direction:A?A>0?Lr.forward:Lr.back:Lr.unknown})})};function l(){o=n.value}function c(d){s.push(d);const g=()=>{const I=s.indexOf(d);I>-1&&s.splice(I,1)};return i.push(g),g}function u(){const{history:d}=window;d.state&&d.replaceState(lt({},d.state,{scroll:Ni()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function jc(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Ni():null}}function x_(e){const{history:t,location:n}=window,r={value:uf(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=e.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:S_()+e+l;try{t[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(g){console.error(g),n[u?"replace":"assign"](d)}}function o(l,c){const u=lt({},t.state,jc(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=lt({},s.value,t.state,{forward:l,scroll:Ni()});i(u.current,u,!0);const h=lt({},jc(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function V_(e){e=w_(e);const t=x_(e),n=C_(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=lt({location:"",base:e,go:r,createHref:I_.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function D_(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),V_(e)}function k_(e){return typeof e=="string"||e&&typeof e=="object"}function hf(e){return typeof e=="string"||typeof e=="symbol"}const He={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ff=Symbol("");var qc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(qc||(qc={}));function rr(e,t){return lt(new Error,{type:e,[ff]:!0},t)}function Oe(e,t){return e instanceof Error&&ff in e&&(t==null||!!(e.type&t))}const zc="[^/]+?",N_={sensitive:!1,strict:!1,start:!0,end:!0},O_=/[.+*?^${}()[\]/\\]/g;function M_(e,t){const n=lt({},N_,t),r=[];let s=n.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let g=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(O_,"\\$&"),g+=40;else if(d.type===1){const{value:I,repeatable:S,optional:A,regexp:V}=d;i.push({name:I,repeatable:S,optional:A});const F=V||zc;if(F!==zc){g+=10;try{new RegExp(`(${F})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${I}" (${F}): `+Y.message)}}let B=S?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;h||(B=A&&c.length<2?`(?:/${B})`:"/"+B),A&&(B+="?"),s+=B,g+=20,A&&(g+=-8),S&&(g+=-20),F===".*"&&(g+=-50)}u.push(g)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const g=u[d]||"",I=i[d-1];h[I.name]=g&&I.repeatable?g.split("/"):g}return h}function l(c){let u="",h=!1;for(const d of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of d)if(g.type===0)u+=g.value;else if(g.type===1){const{value:I,repeatable:S,optional:A}=g,V=I in c?c[I]:"";if(pe(V)&&!S)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const F=pe(V)?V.join("/"):V;if(!F)if(A)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${I}"`);u+=F}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function L_(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function F_(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=L_(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Hc(r))return 1;if(Hc(s))return-1}return s.length-r.length}function Hc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const U_={type:0,value:""},B_=/[a-zA-Z0-9_]/;function $_(e){if(!e)return[[]];if(e==="/")return[[U_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:B_.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function j_(e,t,n){const r=M_($_(e.path),n),s=lt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function q_(e,t){const n=[],r=new Map;t=Qc({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,d){const g=!d,I=z_(u);I.aliasOf=d&&d.record;const S=Qc(t,u),A=[I];if("alias"in u){const B=typeof u.alias=="string"?[u.alias]:u.alias;for(const Y of B)A.push(lt({},I,{components:d?d.record.components:I.components,path:Y,aliasOf:d?d.record:I}))}let V,F;for(const B of A){const{path:Y}=B;if(h&&Y[0]!=="/"){const ft=h.record.path,q=ft[ft.length-1]==="/"?"":"/";B.path=h.record.path+(Y&&q+Y)}if(V=j_(B,h,S),d?d.alias.push(V):(F=F||V,F!==V&&F.alias.push(V),g&&u.name&&!Gc(V)&&o(u.name)),I.children){const ft=I.children;for(let q=0;q<ft.length;q++)i(ft[q],V,d&&d.children[q])}d=d||V,(V.record.components&&Object.keys(V.record.components).length||V.record.name||V.record.redirect)&&l(V)}return F?()=>{o(F)}:Mr}function o(u){if(hf(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&F_(u,n[h])>=0&&(u.record.path!==n[h].record.path||!df(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Gc(u)&&r.set(u.record.name,u)}function c(u,h){let d,g={},I,S;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw rr(1,{location:u});S=d.record.name,g=lt(Kc(h.params,d.keys.filter(F=>!F.optional).map(F=>F.name)),u.params&&Kc(u.params,d.keys.map(F=>F.name))),I=d.stringify(g)}else if("path"in u)I=u.path,d=n.find(F=>F.re.test(I)),d&&(g=d.parse(I),S=d.record.name);else{if(d=h.name?r.get(h.name):n.find(F=>F.re.test(h.path)),!d)throw rr(1,{location:u,currentLocation:h});S=d.record.name,g=lt({},h.params,u.params),I=d.stringify(g)}const A=[];let V=d;for(;V;)A.unshift(V.record),V=V.parent;return{name:S,path:I,params:g,matched:A,meta:K_(A)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Kc(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function z_(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:H_(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function H_(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Gc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function K_(e){return e.reduce((t,n)=>lt(t,n.meta),{})}function Qc(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function df(e,t){return t.children.some(n=>n===e||df(e,n))}const pf=/#/g,G_=/&/g,Q_=/\//g,W_=/=/g,Y_=/\?/g,gf=/\+/g,X_=/%5B/g,J_=/%5D/g,mf=/%5E/g,Z_=/%60/g,_f=/%7B/g,ty=/%7C/g,yf=/%7D/g,ey=/%20/g;function tl(e){return encodeURI(""+e).replace(ty,"|").replace(X_,"[").replace(J_,"]")}function ny(e){return tl(e).replace(_f,"{").replace(yf,"}").replace(mf,"^")}function Jo(e){return tl(e).replace(gf,"%2B").replace(ey,"+").replace(pf,"%23").replace(G_,"%26").replace(Z_,"`").replace(_f,"{").replace(yf,"}").replace(mf,"^")}function ry(e){return Jo(e).replace(W_,"%3D")}function sy(e){return tl(e).replace(pf,"%23").replace(Y_,"%3F")}function iy(e){return e==null?"":sy(e).replace(Q_,"%2F")}function ii(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function oy(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(gf," "),o=i.indexOf("="),a=ii(o<0?i:i.slice(0,o)),l=o<0?null:ii(i.slice(o+1));if(a in t){let c=t[a];pe(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Wc(e){let t="";for(let n in e){const r=e[n];if(n=ry(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(pe(r)?r.map(i=>i&&Jo(i)):[r&&Jo(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function ay(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=pe(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const ly=Symbol(""),Yc=Symbol(""),el=Symbol(""),vf=Symbol(""),Zo=Symbol("");function Ar(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function We(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(rr(4,{from:n,to:t})):h instanceof Error?a(h):k_(h)?a(rr(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},c=e.call(r&&r.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function _o(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(cy(a)){const c=(a.__vccOpts||a)[t];c&&s.push(We(c,n,r,i,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=p_(c)?c.default:c;i.components[o]=u;const d=(u.__vccOpts||u)[t];return d&&We(d,n,r,i,o)()}))}}return s}function cy(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Xc(e){const t=Fe(el),n=Fe(vf),r=ue(()=>t.resolve(Kn(e.to))),s=ue(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(nr.bind(null,u));if(d>-1)return d;const g=Jc(l[c-2]);return c>1&&Jc(u)===g&&h[h.length-1].path!==g?h.findIndex(nr.bind(null,l[c-2])):d}),i=ue(()=>s.value>-1&&dy(n.params,r.value.params)),o=ue(()=>s.value>-1&&s.value===n.matched.length-1&&cf(n.params,r.value.params));function a(l={}){return fy(l)?t[Kn(e.replace)?"replace":"push"](Kn(e.to)).catch(Mr):Promise.resolve()}return{route:r,href:ue(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const uy=Si({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Xc,setup(e,{slots:t}){const n=bi(Xc(e)),{options:r}=Fe(el),s=ue(()=>({[Zc(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Zc(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:lf("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),hy=uy;function fy(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function dy(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!pe(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Jc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Zc=(e,t,n)=>e??t??n,py=Si({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Fe(Zo),s=ue(()=>e.route||r.value),i=Fe(Yc,0),o=ue(()=>{let c=Kn(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=ue(()=>s.value.matched[o.value]);Hs(Yc,ue(()=>o.value+1)),Hs(ly,a),Hs(Zo,s);const l=_g();return qs(()=>[l.value,a.value,e.name],([c,u,h],[d,g,I])=>{u&&(u.instances[h]=c,g&&g!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!nr(u,g)||!d)&&(u.enterCallbacks[h]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,d=h&&h.components[u];if(!d)return tu(n.default,{Component:d,route:c});const g=h.props[u],I=g?g===!0?c.params:typeof g=="function"?g(c):g:null,A=lf(d,lt({},I,t,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return tu(n.default,{Component:A,route:c})||A}}});function tu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const gy=py;function my(e){const t=q_(e.routes,e),n=e.parseQuery||oy,r=e.stringifyQuery||Wc,s=e.history,i=Ar(),o=Ar(),a=Ar(),l=yg(He);let c=He;Ln&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=go.bind(null,y=>""+y),h=go.bind(null,iy),d=go.bind(null,ii);function g(y,N){let D,L;return hf(y)?(D=t.getRecordMatcher(y),L=N):L=y,t.addRoute(L,D)}function I(y){const N=t.getRecordMatcher(y);N&&t.removeRoute(N)}function S(){return t.getRoutes().map(y=>y.record)}function A(y){return!!t.getRecordMatcher(y)}function V(y,N){if(N=lt({},N||l.value),typeof y=="string"){const p=mo(n,y,N.path),m=t.resolve({path:p.path},N),v=s.createHref(p.fullPath);return lt(p,m,{params:d(m.params),hash:ii(p.hash),redirectedFrom:void 0,href:v})}let D;if("path"in y)D=lt({},y,{path:mo(n,y.path,N.path).path});else{const p=lt({},y.params);for(const m in p)p[m]==null&&delete p[m];D=lt({},y,{params:h(p)}),N.params=h(N.params)}const L=t.resolve(D,N),ot=y.hash||"";L.params=u(d(L.params));const pt=__(r,lt({},y,{hash:ny(ot),path:L.path})),f=s.createHref(pt);return lt({fullPath:pt,hash:ot,query:r===Wc?ay(y.query):y.query||{}},L,{redirectedFrom:void 0,href:f})}function F(y){return typeof y=="string"?mo(n,y,l.value.path):lt({},y)}function B(y,N){if(c!==y)return rr(8,{from:N,to:y})}function Y(y){return wt(y)}function ft(y){return Y(lt(F(y),{replace:!0}))}function q(y){const N=y.matched[y.matched.length-1];if(N&&N.redirect){const{redirect:D}=N;let L=typeof D=="function"?D(y):D;return typeof L=="string"&&(L=L.includes("?")||L.includes("#")?L=F(L):{path:L},L.params={}),lt({query:y.query,hash:y.hash,params:"path"in L?{}:y.params},L)}}function wt(y,N){const D=c=V(y),L=l.value,ot=y.state,pt=y.force,f=y.replace===!0,p=q(D);if(p)return wt(lt(F(p),{state:typeof p=="object"?lt({},ot,p.state):ot,force:pt,replace:f}),N||D);const m=D;m.redirectedFrom=N;let v;return!pt&&y_(r,L,D)&&(v=rr(16,{to:m,from:L}),ye(L,L,!0,!1)),(v?Promise.resolve(v):ne(m,L)).catch(_=>Oe(_)?Oe(_,2)?_:qe(_):it(_,m,L)).then(_=>{if(_){if(Oe(_,2))return wt(lt({replace:f},F(_.to),{state:typeof _.to=="object"?lt({},ot,_.to.state):ot,force:pt}),N||m)}else _=cn(m,L,!0,f,ot);return je(m,L,_),_})}function ee(y,N){const D=B(y,N);return D?Promise.reject(D):Promise.resolve()}function $e(y){const N=Nn.values().next().value;return N&&typeof N.runWithContext=="function"?N.runWithContext(y):y()}function ne(y,N){let D;const[L,ot,pt]=_y(y,N);D=_o(L.reverse(),"beforeRouteLeave",y,N);for(const p of L)p.leaveGuards.forEach(m=>{D.push(We(m,y,N))});const f=ee.bind(null,y,N);return D.push(f),Ft(D).then(()=>{D=[];for(const p of i.list())D.push(We(p,y,N));return D.push(f),Ft(D)}).then(()=>{D=_o(ot,"beforeRouteUpdate",y,N);for(const p of ot)p.updateGuards.forEach(m=>{D.push(We(m,y,N))});return D.push(f),Ft(D)}).then(()=>{D=[];for(const p of pt)if(p.beforeEnter)if(pe(p.beforeEnter))for(const m of p.beforeEnter)D.push(We(m,y,N));else D.push(We(p.beforeEnter,y,N));return D.push(f),Ft(D)}).then(()=>(y.matched.forEach(p=>p.enterCallbacks={}),D=_o(pt,"beforeRouteEnter",y,N),D.push(f),Ft(D))).then(()=>{D=[];for(const p of o.list())D.push(We(p,y,N));return D.push(f),Ft(D)}).catch(p=>Oe(p,8)?p:Promise.reject(p))}function je(y,N,D){a.list().forEach(L=>$e(()=>L(y,N,D)))}function cn(y,N,D,L,ot){const pt=B(y,N);if(pt)return pt;const f=N===He,p=Ln?history.state:{};D&&(L||f?s.replace(y.fullPath,lt({scroll:f&&p&&p.scroll},ot)):s.push(y.fullPath,ot)),l.value=y,ye(y,N,D,f),qe()}let _e;function wr(){_e||(_e=s.listen((y,N,D)=>{if(!Rs.listening)return;const L=V(y),ot=q(L);if(ot){wt(lt(ot,{replace:!0}),L).catch(Mr);return}c=L;const pt=l.value;Ln&&R_($c(pt.fullPath,D.delta),Ni()),ne(L,pt).catch(f=>Oe(f,12)?f:Oe(f,2)?(wt(f.to,L).then(p=>{Oe(p,20)&&!D.delta&&D.type===Wr.pop&&s.go(-1,!1)}).catch(Mr),Promise.reject()):(D.delta&&s.go(-D.delta,!1),it(f,L,pt))).then(f=>{f=f||cn(L,pt,!1),f&&(D.delta&&!Oe(f,8)?s.go(-D.delta,!1):D.type===Wr.pop&&Oe(f,20)&&s.go(-1,!1)),je(L,pt,f)}).catch(Mr)}))}let Dn=Ar(),Pt=Ar(),ut;function it(y,N,D){qe(y);const L=Pt.list();return L.length?L.forEach(ot=>ot(y,N,D)):console.error(y),Promise.reject(y)}function Ne(){return ut&&l.value!==He?Promise.resolve():new Promise((y,N)=>{Dn.add([y,N])})}function qe(y){return ut||(ut=!y,wr(),Dn.list().forEach(([N,D])=>y?D(y):N()),Dn.reset()),y}function ye(y,N,D,L){const{scrollBehavior:ot}=e;if(!Ln||!ot)return Promise.resolve();const pt=!D&&P_($c(y.fullPath,0))||(L||!D)&&history.state&&history.state.scroll||null;return Fh().then(()=>ot(y,N,pt)).then(f=>f&&b_(f)).catch(f=>it(f,y,N))}const Xt=y=>s.go(y);let kn;const Nn=new Set,Rs={currentRoute:l,listening:!0,addRoute:g,removeRoute:I,hasRoute:A,getRoutes:S,resolve:V,options:e,push:Y,replace:ft,go:Xt,back:()=>Xt(-1),forward:()=>Xt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Pt.add,isReady:Ne,install(y){const N=this;y.component("RouterLink",hy),y.component("RouterView",gy),y.config.globalProperties.$router=N,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>Kn(l)}),Ln&&!kn&&l.value===He&&(kn=!0,Y(s.location).catch(ot=>{}));const D={};for(const ot in He)Object.defineProperty(D,ot,{get:()=>l.value[ot],enumerable:!0});y.provide(el,N),y.provide(vf,Ch(D)),y.provide(Zo,l);const L=y.unmount;Nn.add(y),y.unmount=function(){Nn.delete(y),Nn.size<1&&(c=He,_e&&_e(),_e=null,l.value=He,kn=!1,ut=!1),L()}}};function Ft(y){return y.reduce((N,D)=>N.then(()=>$e(D)),Promise.resolve())}return Rs}function _y(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(c=>nr(c,a))?r.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>nr(c,l))||s.push(l))}return[n,r,s]}const yy={};function vy(e,t){return Ie(),Ae("p",null,"TEST")}const Ey=ki(yy,[["render",vy]]);var eu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},wy=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(d=64)),r.push(n[u],n[h],n[d],n[g])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ef(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):wy(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Ty;const d=i<<2|a>>4;if(r.push(d),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const I=c<<6&192|h;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ty extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iy=function(e){const t=Ef(e);return wf.encodeByteArray(t,!0)},oi=function(e){return Iy(e).replace(/\./g,"")},Ay=function(e){try{return wf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=()=>by().__FIREBASE_DEFAULTS__,Py=()=>{if(typeof process>"u"||typeof eu>"u")return;const e=eu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Sy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Ay(e[1]);return t&&JSON.parse(t)},nl=()=>{try{return Ry()||Py()||Sy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Cy=e=>{var t,n;return(n=(t=nl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},xy=e=>{const t=Cy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Tf=()=>{var e;return(e=nl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[oi(JSON.stringify(n)),oi(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ky(){var e;const t=(e=nl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ny(){return!ky()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function If(){try{return typeof indexedDB=="object"}catch{return!1}}function Oy(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="FirebaseError";class pr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=My,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Af.prototype.create)}}class Af{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?Ly(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new pr(s,a,r)}}function Ly(e,t){return e.replace(Fy,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Fy=/\{\$([^}]+)}/g;function ta(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(nu(i)&&nu(o)){if(!ta(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e){return e&&e._delegate?e._delegate:e}class Xr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Vy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($y(t))try{this.getOrInitializeService({instanceIdentifier:fn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=fn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=fn){return this.instances.has(t)}getOptions(t=fn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:By(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=fn){return this.component?this.component.multipleInstances?t:fn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function By(e){return e===fn?void 0:e}function $y(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Uy(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(et||(et={}));const qy={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},zy=et.INFO,Hy={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},Ky=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Hy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bf{constructor(t){this.name=t,this._logLevel=zy,this._logHandler=Ky,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}}const Gy=(e,t)=>t.some(n=>e instanceof n);let ru,su;function Qy(){return ru||(ru=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wy(){return su||(su=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rf=new WeakMap,ea=new WeakMap,Pf=new WeakMap,yo=new WeakMap,rl=new WeakMap;function Yy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(tn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Rf.set(n,e)}).catch(()=>{}),rl.set(t,e),t}function Xy(e){if(ea.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});ea.set(e,t)}let na={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ea.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Pf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Jy(e){na=e(na)}function Zy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(vo(this),t,...n);return Pf.set(r,t.sort?t.sort():[t]),tn(r)}:Wy().includes(e)?function(...t){return e.apply(vo(this),t),tn(Rf.get(this))}:function(...t){return tn(e.apply(vo(this),t))}}function tv(e){return typeof e=="function"?Zy(e):(e instanceof IDBTransaction&&Xy(e),Gy(e,Qy())?new Proxy(e,na):e)}function tn(e){if(e instanceof IDBRequest)return Yy(e);if(yo.has(e))return yo.get(e);const t=tv(e);return t!==e&&(yo.set(e,t),rl.set(t,e)),t}const vo=e=>rl.get(e);function ev(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=tn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(tn(o.result),l.oldVersion,l.newVersion,tn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const nv=["get","getKey","getAll","getAllKeys","count"],rv=["put","add","delete","clear"],Eo=new Map;function iu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Eo.get(t))return Eo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=rv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nv.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Eo.set(t,i),i}Jy(e=>({...e,get:(t,n,r)=>iu(t,n)||e.get(t,n,r),has:(t,n)=>!!iu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ra="@firebase/app",ou="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new bf("@firebase/app"),ov="@firebase/app-compat",av="@firebase/analytics-compat",lv="@firebase/analytics",cv="@firebase/app-check-compat",uv="@firebase/app-check",hv="@firebase/auth",fv="@firebase/auth-compat",dv="@firebase/database",pv="@firebase/database-compat",gv="@firebase/functions",mv="@firebase/functions-compat",_v="@firebase/installations",yv="@firebase/installations-compat",vv="@firebase/messaging",Ev="@firebase/messaging-compat",wv="@firebase/performance",Tv="@firebase/performance-compat",Iv="@firebase/remote-config",Av="@firebase/remote-config-compat",bv="@firebase/storage",Rv="@firebase/storage-compat",Pv="@firebase/firestore",Sv="@firebase/firestore-compat",Cv="firebase",xv="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]",Vv={[ra]:"fire-core",[ov]:"fire-core-compat",[lv]:"fire-analytics",[av]:"fire-analytics-compat",[uv]:"fire-app-check",[cv]:"fire-app-check-compat",[hv]:"fire-auth",[fv]:"fire-auth-compat",[dv]:"fire-rtdb",[pv]:"fire-rtdb-compat",[gv]:"fire-fn",[mv]:"fire-fn-compat",[_v]:"fire-iid",[yv]:"fire-iid-compat",[vv]:"fire-fcm",[Ev]:"fire-fcm-compat",[wv]:"fire-perf",[Tv]:"fire-perf-compat",[Iv]:"fire-rc",[Av]:"fire-rc-compat",[bv]:"fire-gcs",[Rv]:"fire-gcs-compat",[Pv]:"fire-fst",[Sv]:"fire-fst-compat","fire-js":"fire-js",[Cv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Map,ia=new Map;function Dv(e,t){try{e.container.addComponent(t)}catch(n){An.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ci(e){const t=e.name;if(ia.has(t))return An.debug(`There were multiple attempts to register component ${t}.`),!1;ia.set(t,e);for(const n of li.values())Dv(n,e);return!0}function kv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},en=new Af("app","Firebase",Nv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=xv;function Sf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:sa,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw en.create("bad-app-name",{appName:String(s)});if(n||(n=Tf()),!n)throw en.create("no-options");const i=li.get(s);if(i){if(ta(n,i.options)&&ta(r,i.config))return i;throw en.create("duplicate-app",{appName:s})}const o=new jy(s);for(const l of ia.values())o.addComponent(l);const a=new Ov(n,r,o);return li.set(s,a),a}function Lv(e=sa){const t=li.get(e);if(!t&&e===sa&&Tf())return Sf();if(!t)throw en.create("no-app",{appName:e});return t}function Qn(e,t,n){var r;let s=(r=Vv[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),An.warn(a.join(" "));return}ci(new Xr(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firebase-heartbeat-database",Uv=1,Jr="firebase-heartbeat-store";let wo=null;function Cf(){return wo||(wo=ev(Fv,Uv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Jr)}catch(n){console.warn(n)}}}}).catch(e=>{throw en.create("idb-open",{originalErrorMessage:e.message})})),wo}async function Bv(e){try{return await(await Cf()).transaction(Jr).objectStore(Jr).get(xf(e))}catch(t){if(t instanceof pr)An.warn(t.message);else{const n=en.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});An.warn(n.message)}}}async function au(e,t){try{const r=(await Cf()).transaction(Jr,"readwrite");await r.objectStore(Jr).put(t,xf(e)),await r.done}catch(n){if(n instanceof pr)An.warn(n.message);else{const r=en.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});An.warn(r.message)}}}function xf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=1024,jv=30*24*60*60*1e3;class qv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lu();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=jv}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lu(),{heartbeatsToSend:r,unsentEntries:s}=zv(this._heartbeatsCache.heartbeats),i=oi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function lu(){return new Date().toISOString().substring(0,10)}function zv(e,t=$v){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),cu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Hv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return If()?Oy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return au(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return au(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function cu(e){return oi(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(e){ci(new Xr("platform-logger",t=>new sv(t),"PRIVATE")),ci(new Xr("heartbeat",t=>new qv(t),"PRIVATE")),Qn(ra,ou,e),Qn(ra,ou,"esm2017"),Qn("fire-js","")}Kv("");var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},C,sl=sl||{},z=Gv||self;function Oi(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function ds(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function Qv(e){return Object.prototype.hasOwnProperty.call(e,To)&&e[To]||(e[To]=++Wv)}var To="closure_uid_"+(1e9*Math.random()>>>0),Wv=0;function Yv(e,t,n){return e.call.apply(e.bind,arguments)}function Xv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Ht(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ht=Yv:Ht=Xv,Ht.apply(null,arguments)}function ks(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Dt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function an(){this.s=this.s,this.o=this.o}var Jv=0;an.prototype.s=!1;an.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Jv!=0)&&Qv(this)};an.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function il(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function uu(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Oi(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Kt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Kt.prototype.h=function(){this.defaultPrevented=!0};var Zv=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};z.addEventListener("test",n,t),z.removeEventListener("test",n,t)}catch{}return e}();function Zr(e){return/^[\s\xa0]*$/.test(e)}function Mi(){var e=z.navigator;return e&&(e=e.userAgent)?e:""}function be(e){return Mi().indexOf(e)!=-1}function ol(e){return ol[" "](e),e}ol[" "]=function(){};function t0(e,t){var n=K0;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var e0=be("Opera"),sr=be("Trident")||be("MSIE"),Df=be("Edge"),oa=Df||sr,kf=be("Gecko")&&!(Mi().toLowerCase().indexOf("webkit")!=-1&&!be("Edge"))&&!(be("Trident")||be("MSIE"))&&!be("Edge"),n0=Mi().toLowerCase().indexOf("webkit")!=-1&&!be("Edge");function Nf(){var e=z.document;return e?e.documentMode:void 0}var aa;t:{var Io="",Ao=function(){var e=Mi();if(kf)return/rv:([^\);]+)(\)|;)/.exec(e);if(Df)return/Edge\/([\d\.]+)/.exec(e);if(sr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(n0)return/WebKit\/(\S+)/.exec(e);if(e0)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Ao&&(Io=Ao?Ao[1]:""),sr){var bo=Nf();if(bo!=null&&bo>parseFloat(Io)){aa=String(bo);break t}}aa=Io}var la;if(z.document&&sr){var hu=Nf();la=hu||parseInt(aa,10)||void 0}else la=void 0;var r0=la;function ts(e,t){if(Kt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(kf){t:{try{ol(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:s0[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ts.$.h.call(this)}}Dt(ts,Kt);var s0={2:"touch",3:"pen",4:"mouse"};ts.prototype.h=function(){ts.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ps="closure_listenable_"+(1e6*Math.random()|0),i0=0;function o0(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++i0,this.fa=this.ia=!1}function Li(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function al(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function a0(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Of(e){const t={};for(const n in e)t[n]=e[n];return t}const fu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mf(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<fu.length;i++)n=fu[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Fi(e){this.src=e,this.g={},this.h=0}Fi.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=ua(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new o0(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function ca(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Vf(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Li(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function ua(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var ll="closure_lm_"+(1e6*Math.random()|0),Ro={};function Lf(e,t,n,r,s){if(r&&r.once)return Uf(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Lf(e,t[i],n,r,s);return null}return n=hl(n),e&&e[ps]?e.O(t,n,ds(r)?!!r.capture:!!r,s):Ff(e,t,n,!1,r,s)}function Ff(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=ds(s)?!!s.capture:!!s,a=ul(e);if(a||(e[ll]=a=new Fi(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=l0(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Zv||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent($f(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function l0(){function e(n){return t.call(e.src,e.listener,n)}const t=c0;return e}function Uf(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Uf(e,t[i],n,r,s);return null}return n=hl(n),e&&e[ps]?e.P(t,n,ds(r)?!!r.capture:!!r,s):Ff(e,t,n,!0,r,s)}function Bf(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Bf(e,t[i],n,r,s);else r=ds(r)?!!r.capture:!!r,n=hl(n),e&&e[ps]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=ua(i,n,r,s),-1<n&&(Li(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=ul(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ua(t,n,r,s)),(n=-1<e?t[e]:null)&&cl(n))}function cl(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[ps])ca(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($f(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ul(t))?(ca(n,e),n.h==0&&(n.src=null,t[ll]=null)):Li(e)}}}function $f(e){return e in Ro?Ro[e]:Ro[e]="on"+e}function c0(e,t){if(e.fa)e=!0;else{t=new ts(t,this);var n=e.listener,r=e.la||e.src;e.ia&&cl(e),e=n.call(r,t)}return e}function ul(e){return e=e[ll],e instanceof Fi?e:null}var Po="__closure_events_fn_"+(1e9*Math.random()>>>0);function hl(e){return typeof e=="function"?e:(e[Po]||(e[Po]=function(t){return e.handleEvent(t)}),e[Po])}function Vt(){an.call(this),this.i=new Fi(this),this.S=this,this.J=null}Dt(Vt,an);Vt.prototype[ps]=!0;Vt.prototype.removeEventListener=function(e,t,n,r){Bf(this,e,t,n,r)};function Ot(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Kt(t,e);else if(t instanceof Kt)t.target=t.target||e;else{var s=t;t=new Kt(r,e),Mf(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=Ns(o,r,!0,t)&&s}if(o=t.g=e,s=Ns(o,r,!0,t)&&s,s=Ns(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=Ns(o,r,!1,t)&&s}Vt.prototype.N=function(){if(Vt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Li(n[r]);delete e.g[t],e.h--}}this.J=null};Vt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Vt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Ns(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ca(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var fl=z.JSON.stringify;class u0{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function h0(){var e=dl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class f0{constructor(){this.h=this.g=null}add(t,n){const r=jf.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var jf=new u0(()=>new d0,e=>e.reset());class d0{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function p0(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function g0(e){z.setTimeout(()=>{throw e},0)}let es,ns=!1,dl=new f0,qf=()=>{const e=z.Promise.resolve(void 0);es=()=>{e.then(m0)}};var m0=()=>{for(var e;e=h0();){try{e.h.call(e.g)}catch(n){g0(n)}var t=jf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ns=!1};function Ui(e,t){Vt.call(this),this.h=e||1,this.g=t||z,this.j=Ht(this.qb,this),this.l=Date.now()}Dt(Ui,Vt);C=Ui.prototype;C.ga=!1;C.T=null;C.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ot(this,"tick"),this.ga&&(pl(this),this.start()))}};C.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function pl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}C.N=function(){Ui.$.N.call(this),pl(this),delete this.g};function gl(e,t,n){if(typeof e=="function")n&&(e=Ht(e,n));else if(e&&typeof e.handleEvent=="function")e=Ht(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:z.setTimeout(e,t||0)}function zf(e){e.g=gl(()=>{e.g=null,e.i&&(e.i=!1,zf(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class _0 extends an{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:zf(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(e){an.call(this),this.h=e,this.g={}}Dt(rs,an);var du=[];function Hf(e,t,n,r){Array.isArray(n)||(n&&(du[0]=n.toString()),n=du);for(var s=0;s<n.length;s++){var i=Lf(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Kf(e){al(e.g,function(t,n){this.g.hasOwnProperty(n)&&cl(t)},e),e.g={}}rs.prototype.N=function(){rs.$.N.call(this),Kf(this)};rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Bi(){this.g=!0}Bi.prototype.Ea=function(){this.g=!1};function y0(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function v0(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function jn(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+w0(e,n)+(r?" "+r:"")})}function E0(e,t){e.info(function(){return"TIMEOUT: "+t})}Bi.prototype.info=function(){};function w0(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return fl(n)}catch{return t}}var xn={},pu=null;function $i(){return pu=pu||new Vt}xn.Ta="serverreachability";function Gf(e){Kt.call(this,xn.Ta,e)}Dt(Gf,Kt);function ss(e){const t=$i();Ot(t,new Gf(t))}xn.STAT_EVENT="statevent";function Qf(e,t){Kt.call(this,xn.STAT_EVENT,e),this.stat=t}Dt(Qf,Kt);function Yt(e){const t=$i();Ot(t,new Qf(t,e))}xn.Ua="timingevent";function Wf(e,t){Kt.call(this,xn.Ua,e),this.size=t}Dt(Wf,Kt);function gs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){e()},t)}var ji={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Yf={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ml(){}ml.prototype.h=null;function gu(e){return e.h||(e.h=e.i())}function Xf(){}var ms={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _l(){Kt.call(this,"d")}Dt(_l,Kt);function yl(){Kt.call(this,"c")}Dt(yl,Kt);var ha;function qi(){}Dt(qi,ml);qi.prototype.g=function(){return new XMLHttpRequest};qi.prototype.i=function(){return{}};ha=new qi;function _s(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new rs(this),this.P=T0,e=oa?125:void 0,this.V=new Ui(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Jf}function Jf(){this.i=null,this.g="",this.h=!1}var T0=45e3,Zf={},fa={};C=_s.prototype;C.setTimeout=function(e){this.P=e};function da(e,t,n){e.L=1,e.A=Hi(Ue(t)),e.u=n,e.S=!0,td(e,null)}function td(e,t){e.G=Date.now(),ys(e),e.B=Ue(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),ld(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Jf,e.g=Cd(e.l,n?t:null,!e.u),0<e.O&&(e.M=new _0(Ht(e.Pa,e,e.g),e.O)),Hf(e.U,e.g,"readystatechange",e.nb),t=e.I?Of(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ss(),y0(e.j,e.v,e.B,e.m,e.W,e.u)}C.nb=function(e){e=e.target;const t=this.M;t&&Pe(e)==3?t.l():this.Pa(e)};C.Pa=function(e){try{if(e==this.g)t:{const u=Pe(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||oa||this.g&&(this.h.h||this.g.ja()||vu(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?ss(3):ss(2)),zi(this);var n=this.g.da();this.ca=n;e:if(ed(this)){var r=vu(this.g);e="";var s=r.length,i=Pe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Fr(this);var o="";break e}this.h.i=new z.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,v0(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zr(a)){var c=a;break e}}c=null}if(n=c)jn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pa(this,n);else{this.i=!1,this.s=3,Yt(12),gn(this),Fr(this);break t}}this.S?(nd(this,u,o),oa&&this.i&&u==3&&(Hf(this.U,this.V,"tick",this.mb),this.V.start())):(jn(this.j,this.m,o,null),pa(this,o)),u==4&&gn(this),this.i&&!this.J&&(u==4?bd(this.l,this):(this.i=!1,ys(this)))}else q0(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),gn(this),Fr(this)}}}catch{}finally{}};function ed(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function nd(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=I0(e,n),s==fa){t==4&&(e.s=4,Yt(14),r=!1),jn(e.j,e.m,null,"[Incomplete Response]");break}else if(s==Zf){e.s=4,Yt(15),jn(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else jn(e.j,e.m,s,null),pa(e,s);ed(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,Yt(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Al(t),t.M=!0,Yt(11))):(jn(e.j,e.m,n,"[Invalid Chunked Response]"),gn(e),Fr(e))}C.mb=function(){if(this.g){var e=Pe(this.g),t=this.g.ja();this.o<t.length&&(zi(this),nd(this,e,t),this.i&&e!=4&&ys(this))}};function I0(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?fa:(n=Number(t.substring(n,r)),isNaN(n)?Zf:(r+=1,r+n>t.length?fa:(t=t.slice(r,r+n),e.o=r+n,t)))}C.cancel=function(){this.J=!0,gn(this)};function ys(e){e.Y=Date.now()+e.P,rd(e,e.P)}function rd(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=gs(Ht(e.lb,e),t)}function zi(e){e.C&&(z.clearTimeout(e.C),e.C=null)}C.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(E0(this.j,this.B),this.L!=2&&(ss(),Yt(17)),gn(this),this.s=2,Fr(this)):rd(this,this.Y-e)};function Fr(e){e.l.H==0||e.J||bd(e.l,e)}function gn(e){zi(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,pl(e.V),Kf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function pa(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||ga(n.i,e))){if(!e.K&&ga(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)fi(n),Wi(n);else break t;Il(n),Yt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=gs(Ht(n.ib,n),6e3));if(1>=hd(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else mn(n,11)}else if((e.K||n.g==e)&&fi(n),!Zr(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=e.g;if(g){const I=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var i=r.i;i.g||I.indexOf("spdy")==-1&&I.indexOf("quic")==-1&&I.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(vl(i,i.h),i.h=null))}if(r.F){const S=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(r.Da=S,dt(r.I,r.F,S))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Sd(r,r.J?r.pa:null,r.Y),o.K){fd(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(zi(a),ys(a)),r.g=o}else Id(r);0<n.j.length&&Yi(n)}else c[0]!="stop"&&c[0]!="close"||mn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?mn(n,7):Tl(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ss(4)}catch{}}function A0(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Oi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function b0(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Oi(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function sd(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Oi(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=b0(e),r=A0(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var id=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function R0(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function wn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof wn){this.h=e.h,ui(this,e.j),this.s=e.s,this.g=e.g,hi(this,e.m),this.l=e.l;var t=e.i,n=new is;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),mu(this,n),this.o=e.o}else e&&(t=String(e).match(id))?(this.h=!1,ui(this,t[1]||"",!0),this.s=Cr(t[2]||""),this.g=Cr(t[3]||"",!0),hi(this,t[4]),this.l=Cr(t[5]||"",!0),mu(this,t[6]||"",!0),this.o=Cr(t[7]||"")):(this.h=!1,this.i=new is(null,this.h))}wn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xr(t,_u,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(xr(t,_u,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(xr(n,n.charAt(0)=="/"?C0:S0,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xr(n,V0)),e.join("")};function Ue(e){return new wn(e)}function ui(e,t,n){e.j=n?Cr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function hi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function mu(e,t,n){t instanceof is?(e.i=t,D0(e.i,e.h)):(n||(t=xr(t,x0)),e.i=new is(t,e.h))}function dt(e,t,n){e.i.set(t,n)}function Hi(e){return dt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Cr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,P0),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function P0(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var _u=/[#\/\?@]/g,S0=/[#\?:]/g,C0=/[#\?]/g,x0=/[#\?@]/g,V0=/#/g;function is(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ln(e){e.g||(e.g=new Map,e.h=0,e.i&&R0(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}C=is.prototype;C.add=function(e,t){ln(this),this.i=null,e=gr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function od(e,t){ln(e),t=gr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ad(e,t){return ln(e),t=gr(e,t),e.g.has(t)}C.forEach=function(e,t){ln(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};C.ta=function(){ln(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};C.Z=function(e){ln(this);let t=[];if(typeof e=="string")ad(this,e)&&(t=t.concat(this.g.get(gr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};C.set=function(e,t){return ln(this),this.i=null,e=gr(this,e),ad(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};C.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function ld(e,t,n){od(e,t),0<n.length&&(e.i=null,e.g.set(gr(e,t),il(n)),e.h+=n.length)}C.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function gr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function D0(e,t){t&&!e.j&&(ln(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(od(this,r),ld(this,s,n))},e)),e.j=t}var k0=class{constructor(e,t){this.g=e,this.map=t}};function cd(e){this.l=e||N0,z.PerformanceNavigationTiming?(e=z.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var N0=10;function ud(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function hd(e){return e.h?1:e.g?e.g.size:0}function ga(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function vl(e,t){e.g?e.g.add(t):e.h=t}function fd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}cd.prototype.cancel=function(){if(this.i=dd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function dd(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return il(e.i)}var O0=class{stringify(e){return z.JSON.stringify(e,void 0)}parse(e){return z.JSON.parse(e,void 0)}};function M0(){this.g=new O0}function L0(e,t,n){const r=n||"";try{sd(e,function(s,i){let o=s;ds(s)&&(o=fl(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function F0(e,t){const n=new Bi;if(z.Image){const r=new Image;r.onload=ks(Os,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ks(Os,n,r,"TestLoadImage: error",!1,t),r.onabort=ks(Os,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ks(Os,n,r,"TestLoadImage: timeout",!1,t),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Os(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function Ki(e){this.l=e.ec||null,this.j=e.ob||!1}Dt(Ki,ml);Ki.prototype.g=function(){return new Gi(this.l,this.j)};Ki.prototype.i=function(e){return function(){return e}}({});function Gi(e,t){Vt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=El,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Dt(Gi,Vt);var El=0;C=Gi.prototype;C.open=function(e,t){if(this.readyState!=El)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,os(this)};C.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||z).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};C.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=El};C.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function pd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}C.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?vs(this):os(this),this.readyState==3&&pd(this)}};C.Za=function(e){this.g&&(this.response=this.responseText=e,vs(this))};C.Ya=function(e){this.g&&(this.response=e,vs(this))};C.ka=function(){this.g&&vs(this)};function vs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,os(e)}C.setRequestHeader=function(e,t){this.v.append(e,t)};C.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};C.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function os(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var U0=z.JSON.parse;function vt(e){Vt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gd,this.L=this.M=!1}Dt(vt,Vt);var gd="",B0=/^https?$/i,$0=["POST","PUT"];C=vt.prototype;C.Oa=function(e){this.M=e};C.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ha.g(),this.C=this.u?gu(this.u):gu(ha),this.g.onreadystatechange=Ht(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){yu(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=z.FormData&&e instanceof z.FormData,!(0<=Vf($0,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yd(this),0<this.B&&((this.L=j0(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ht(this.ua,this)):this.A=gl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){yu(this,i)}};function j0(e){return sr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}C.ua=function(){typeof sl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))};function yu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,md(e),Qi(e)}function md(e){e.F||(e.F=!0,Ot(e,"complete"),Ot(e,"error"))}C.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ot(this,"complete"),Ot(this,"abort"),Qi(this))};C.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qi(this,!0)),vt.$.N.call(this)};C.La=function(){this.s||(this.G||this.v||this.l?_d(this):this.kb())};C.kb=function(){_d(this)};function _d(e){if(e.h&&typeof sl<"u"&&(!e.C[1]||Pe(e)!=4||e.da()!=2)){if(e.v&&Pe(e)==4)gl(e.La,0,e);else if(Ot(e,"readystatechange"),Pe(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(id)[1]||null;!s&&z.self&&z.self.location&&(s=z.self.location.protocol.slice(0,-1)),r=!B0.test(s?s.toLowerCase():"")}n=r}if(n)Ot(e,"complete"),Ot(e,"success");else{e.m=6;try{var i=2<Pe(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",md(e)}}finally{Qi(e)}}}}function Qi(e,t){if(e.g){yd(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ot(e,"ready");try{n.onreadystatechange=r}catch{}}}function yd(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(z.clearTimeout(e.A),e.A=null)}C.isActive=function(){return!!this.g};function Pe(e){return e.g?e.g.readyState:0}C.da=function(){try{return 2<Pe(this)?this.g.status:-1}catch{return-1}};C.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};C.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),U0(t)}};function vu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case gd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function q0(e){const t={};e=(e.g&&2<=Pe(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Zr(e[r]))continue;var n=p0(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}a0(t,function(r){return r.join(", ")})}C.Ia=function(){return this.m};C.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function vd(e){let t="";return al(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function wl(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=vd(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):dt(e,t,n))}function br(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ed(e){this.Ga=0,this.j=[],this.l=new Bi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=br("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=br("baseRetryDelayMs",5e3,e),this.hb=br("retryDelaySeedMs",1e4,e),this.eb=br("forwardChannelMaxRetries",2,e),this.xa=br("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new cd(e&&e.concurrentRequestLimit),this.Ja=new M0,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}C=Ed.prototype;C.ra=8;C.H=1;function Tl(e){if(wd(e),e.H==3){var t=e.W++,n=Ue(e.I);if(dt(n,"SID",e.K),dt(n,"RID",t),dt(n,"TYPE","terminate"),Es(e,n),t=new _s(e,e.l,t),t.L=2,t.A=Hi(Ue(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&z.Image&&(new Image().src=t.A,n=!0),n||(t.g=Cd(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ys(t)}Pd(e)}function Wi(e){e.g&&(Al(e),e.g.cancel(),e.g=null)}function wd(e){Wi(e),e.u&&(z.clearTimeout(e.u),e.u=null),fi(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&z.clearTimeout(e.m),e.m=null)}function Yi(e){if(!ud(e.i)&&!e.m){e.m=!0;var t=e.Na;es||qf(),ns||(es(),ns=!0),dl.add(t,e),e.C=0}}function z0(e,t){return hd(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=gs(Ht(e.Na,e,t),Rd(e,e.C)),e.C++,!0)}C.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new _s(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Of(i),Mf(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Td(this,s,t),n=Ue(this.I),dt(n,"RID",e),dt(n,"CVER",22),this.F&&dt(n,"X-HTTP-Session-Id",this.F),Es(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(vd(i)))+"&"+t:this.o&&wl(n,this.o,i)),vl(this.i,s),this.bb&&dt(n,"TYPE","init"),this.P?(dt(n,"$req",t),dt(n,"SID","null"),s.aa=!0,da(s,n,null)):da(s,n,t),this.H=2}}else this.H==3&&(e?Eu(this,e):this.j.length==0||ud(this.i)||Eu(this))};function Eu(e,t){var n;t?n=t.m:n=e.W++;const r=Ue(e.I);dt(r,"SID",e.K),dt(r,"RID",n),dt(r,"AID",e.V),Es(e,r),e.o&&e.s&&wl(r,e.o,e.s),n=new _s(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Td(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),vl(e.i,n),da(n,r,t)}function Es(e,t){e.na&&al(e.na,function(n,r){dt(t,r,n)}),e.h&&sd({},function(n,r){dt(t,r,n)})}function Td(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ht(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{L0(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function Id(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;es||qf(),ns||(es(),ns=!0),dl.add(t,e),e.A=0}}function Il(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=gs(Ht(e.Ma,e),Rd(e,e.A)),e.A++,!0)}C.Ma=function(){if(this.u=null,Ad(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=gs(Ht(this.jb,this),e)}};C.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yt(10),Wi(this),Ad(this))};function Al(e){e.B!=null&&(z.clearTimeout(e.B),e.B=null)}function Ad(e){e.g=new _s(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Ue(e.wa);dt(t,"RID","rpc"),dt(t,"SID",e.K),dt(t,"AID",e.V),dt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&dt(t,"TO",e.qa),dt(t,"TYPE","xmlhttp"),Es(e,t),e.o&&e.s&&wl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Hi(Ue(t)),n.u=null,n.S=!0,td(n,e)}C.ib=function(){this.v!=null&&(this.v=null,Wi(this),Il(this),Yt(19))};function fi(e){e.v!=null&&(z.clearTimeout(e.v),e.v=null)}function bd(e,t){var n=null;if(e.g==t){fi(e),Al(e),e.g=null;var r=2}else if(ga(e.i,t))n=t.F,fd(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=$i(),Ot(r,new Wf(r,n)),Yi(e)}else Id(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&z0(e,t)||r==2&&Il(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}}function Rd(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Ht(e.pb,e);n||(n=new wn("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||ui(n,"https"),Hi(n)),F0(n.toString(),r)}else Yt(2);e.H=0,e.h&&e.h.za(t),Pd(e),wd(e)}C.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Yt(2)):(this.l.info("Failed to ping google.com"),Yt(1))};function Pd(e){if(e.H=0,e.ma=[],e.h){const t=dd(e.i);(t.length!=0||e.j.length!=0)&&(uu(e.ma,t),uu(e.ma,e.j),e.i.i.length=0,il(e.j),e.j.length=0),e.h.ya()}}function Sd(e,t,n){var r=n instanceof wn?Ue(n):new wn(n);if(r.g!="")t&&(r.g=t+"."+r.g),hi(r,r.m);else{var s=z.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new wn(null);r&&ui(i,r),t&&(i.g=t),s&&hi(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&dt(r,n,t),dt(r,"VER",e.ra),Es(e,r),r}function Cd(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new vt(new Ki({ob:n})):new vt(e.va),t.Oa(e.J),t}C.isActive=function(){return!!this.h&&this.h.isActive(this)};function xd(){}C=xd.prototype;C.Ba=function(){};C.Aa=function(){};C.za=function(){};C.ya=function(){};C.isActive=function(){return!0};C.Va=function(){};function di(){if(sr&&!(10<=Number(r0)))throw Error("Environmental error: no available transport.")}di.prototype.g=function(e,t){return new ie(e,t)};function ie(e,t){Vt.call(this),this.g=new Ed(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Zr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zr(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new mr(this)}Dt(ie,Vt);ie.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Yt(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Sd(e,null,e.Y),Yi(e)};ie.prototype.close=function(){Tl(this.g)};ie.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=fl(e),e=n);t.j.push(new k0(t.fb++,e)),t.H==3&&Yi(t)};ie.prototype.N=function(){this.g.h=null,delete this.j,Tl(this.g),delete this.g,ie.$.N.call(this)};function Vd(e){_l.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Dt(Vd,_l);function Dd(){yl.call(this),this.status=1}Dt(Dd,yl);function mr(e){this.g=e}Dt(mr,xd);mr.prototype.Ba=function(){Ot(this.g,"a")};mr.prototype.Aa=function(e){Ot(this.g,new Vd(e))};mr.prototype.za=function(e){Ot(this.g,new Dd)};mr.prototype.ya=function(){Ot(this.g,"b")};function H0(){this.blockSize=-1}function ge(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Dt(ge,H0);ge.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function So(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}ge.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)So(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){So(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){So(this,r),s=0;break}}this.h=s,this.i+=t};ge.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function ct(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var K0={};function bl(e){return-128<=e&&128>e?t0(e,function(t){return new ct([t|0],0>t?-1:0)}):new ct([e|0],0>e?-1:0)}function Se(e){if(isNaN(e)||!isFinite(e))return Wn;if(0>e)return Nt(Se(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ma;return new ct(t,0)}function kd(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Nt(kd(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Se(Math.pow(t,8)),r=Wn,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Se(Math.pow(t,i)),r=r.R(i).add(Se(o))):(r=r.R(n),r=r.add(Se(o)))}return r}var ma=4294967296,Wn=bl(0),_a=bl(1),wu=bl(16777216);C=ct.prototype;C.ea=function(){if(oe(this))return-Nt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ma+r)*t,t*=ma}return e};C.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Me(this))return"0";if(oe(this))return"-"+Nt(this).toString(e);for(var t=Se(Math.pow(e,6)),n=this,r="";;){var s=gi(n,t).g;n=pi(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Me(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};C.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Me(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function oe(e){return e.h==-1}C.X=function(e){return e=pi(this,e),oe(e)?-1:Me(e)?0:1};function Nt(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ct(n,~e.h).add(_a)}C.abs=function(){return oe(this)?Nt(this):this};C.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ct(n,n[n.length-1]&-2147483648?-1:0)};function pi(e,t){return e.add(Nt(t))}C.R=function(e){if(Me(this)||Me(e))return Wn;if(oe(this))return oe(e)?Nt(this).R(Nt(e)):Nt(Nt(this).R(e));if(oe(e))return Nt(this.R(Nt(e)));if(0>this.X(wu)&&0>e.X(wu))return Se(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,Ms(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Ms(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ms(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ms(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ct(n,0)};function Ms(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Rr(e,t){this.g=e,this.h=t}function gi(e,t){if(Me(t))throw Error("division by zero");if(Me(e))return new Rr(Wn,Wn);if(oe(e))return t=gi(Nt(e),t),new Rr(Nt(t.g),Nt(t.h));if(oe(t))return t=gi(e,Nt(t)),new Rr(Nt(t.g),t.h);if(30<e.g.length){if(oe(e)||oe(t))throw Error("slowDivide_ only works with positive integers.");for(var n=_a,r=t;0>=r.X(e);)n=Tu(n),r=Tu(r);var s=Mn(n,1),i=Mn(r,1);for(r=Mn(r,2),n=Mn(n,2);!Me(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=Mn(r,1),n=Mn(n,1)}return t=pi(e,s.R(t)),new Rr(s,t)}for(s=Wn;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Se(n),o=i.R(t);oe(o)||0<o.X(e);)n-=r,i=Se(n),o=i.R(t);Me(i)&&(i=_a),s=s.add(i),e=pi(e,o)}return new Rr(s,e)}C.gb=function(e){return gi(this,e).h};C.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ct(n,this.h&e.h)};C.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ct(n,this.h|e.h)};C.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ct(n,this.h^e.h)};function Tu(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ct(n,e.h)}function Mn(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new ct(s,e.h)}di.prototype.createWebChannel=di.prototype.g;ie.prototype.send=ie.prototype.u;ie.prototype.open=ie.prototype.m;ie.prototype.close=ie.prototype.close;ji.NO_ERROR=0;ji.TIMEOUT=8;ji.HTTP_ERROR=6;Yf.COMPLETE="complete";Xf.EventType=ms;ms.OPEN="a";ms.CLOSE="b";ms.ERROR="c";ms.MESSAGE="d";Vt.prototype.listen=Vt.prototype.O;vt.prototype.listenOnce=vt.prototype.P;vt.prototype.getLastError=vt.prototype.Sa;vt.prototype.getLastErrorCode=vt.prototype.Ia;vt.prototype.getStatus=vt.prototype.da;vt.prototype.getResponseJson=vt.prototype.Wa;vt.prototype.getResponseText=vt.prototype.ja;vt.prototype.send=vt.prototype.ha;vt.prototype.setWithCredentials=vt.prototype.Oa;ge.prototype.digest=ge.prototype.l;ge.prototype.reset=ge.prototype.reset;ge.prototype.update=ge.prototype.j;ct.prototype.add=ct.prototype.add;ct.prototype.multiply=ct.prototype.R;ct.prototype.modulo=ct.prototype.gb;ct.prototype.compare=ct.prototype.X;ct.prototype.toNumber=ct.prototype.ea;ct.prototype.toString=ct.prototype.toString;ct.prototype.getBits=ct.prototype.D;ct.fromNumber=Se;ct.fromString=kd;var G0=function(){return new di},Q0=function(){return $i()},Co=ji,W0=Yf,Y0=xn,Iu={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ls=Xf,X0=vt,J0=ge,Yn=ct;const Au="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _r="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new bf("@firebase/firestore");function Pr(){return bn.logLevel}function x(e,...t){if(bn.logLevel<=et.DEBUG){const n=t.map(Rl);bn.debug(`Firestore (${_r}): ${e}`,...n)}}function Ve(e,...t){if(bn.logLevel<=et.ERROR){const n=t.map(Rl);bn.error(`Firestore (${_r}): ${e}`,...n)}}function ir(e,...t){if(bn.logLevel<=et.WARN){const n=t.map(Rl);bn.warn(`Firestore (${_r}): ${e}`,...n)}}function Rl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e="Unexpected state"){const t=`FIRESTORE (${_r}) INTERNAL ASSERTION FAILED: `+e;throw Ve(t),new Error(t)}function bt(e,t){e||Q()}function rt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends pr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Z0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class tE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eE{constructor(t){this.t=t,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tn,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string"),new Nd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return bt(t===null||typeof t=="string"),new Bt(t)}}class nE{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rE{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new nE(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iE{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(bt(typeof n.token=="string"),this.R=n.token,new sE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=oE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function at(e,t){return e<t?-1:e>t?1:0}function or(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new M(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return xt.fromMillis(Date.now())}static fromDate(t){return xt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.timestamp=t}static fromTimestamp(t){return new G(t)}static min(){return new G(new xt(0,0))}static max(){return new G(new xt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,n,r){n===void 0?n=0:n>t.length&&Q(),r===void 0?r=t.length-n:r>t.length-n&&Q(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return as.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof as?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class yt extends as{construct(t,n,r){return new yt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new M(T.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new yt(n)}static emptyPath(){return new yt([])}}const lE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends as{construct(t,n,r){return new zt(t,n,r)}static isValidIdentifier(t){return lE.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(T.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new M(T.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new M(T.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.path=t}static fromPath(t){return new j(yt.fromString(t))}static fromName(t){return new j(yt.fromString(t).popFirst(5))}static empty(){return new j(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return yt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new j(new yt(t.slice()))}}function cE(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=G.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new rn(s,j.empty(),t)}function uE(e){return new rn(e.readTime,e.key,-1)}class rn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new rn(G.min(),j.empty(),-1)}static max(){return new rn(G.max(),j.empty(),-1)}}function hE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=j.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(e){if(e.code!==T.FAILED_PRECONDITION||e.message!==fE)throw e;x("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new E((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):E.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):E.reject(n)}static resolve(t){return new E((n,r)=>{n(t)})}static reject(t){return new E((n,r)=>{r(t)})}static waitFor(t){return new E((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=E.resolve(!1);for(const r of t)n=n.next(s=>s?E.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new E((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new E((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Tn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ur(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Cl(r.target.error);this.V.reject(new Ur(t,s))}}static open(t,n,r,s){try{return new Sl(n,t.transaction(s,r))}catch(i){throw new Ur(n,i)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(x("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new gE(n)}}class _n{constructor(t,n,r){this.name=t,this.version=n,this.p=r,_n.S(ai())===12.2&&Ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return x("SimpleDb","Removing database:",t),pn(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!If())return!1;if(_n.C())return!0;const t=ai(),n=_n.S(t),r=0<n&&n<10,s=_n.v(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(x("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ur(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new M(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new M(T.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ur(t,o))},s.onupgradeneeded=i=>{x("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{x("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=Sl.open(this.db,t,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),E.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(x("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class pE{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return pn(this.k.delete())}}class Ur extends M{constructor(t,n){super(T.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ws(e){return e.name==="IndexedDbTransactionError"}class gE{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(x("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(x("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),pn(r)}add(t){return x("SimpleDb","ADD",this.store.name,t,t),pn(this.store.add(t))}get(t){return pn(this.store.get(t)).next(n=>(n===void 0&&(n=null),x("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return x("SimpleDb","DELETE",this.store.name,t),pn(this.store.delete(t))}count(){return x("SimpleDb","COUNT",this.store.name),pn(this.store.count())}W(t,n){const r=this.options(t,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new E((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new E((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(t,n){x("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const s=this.cursor(r);return this.G(s,n)}Z(t){const n=this.cursor({});return new E((r,s)=>{n.onerror=i=>{const o=Cl(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){const r=[];return new E((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new pE(a),c=n(a.primaryKey,a.value,l);if(c instanceof E){const u=c.catch(h=>(l.done(),E.reject(h)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>E.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function pn(e){return new E((t,n)=>{e.onsuccess=r=>{const s=r.target.result;t(s)},e.onerror=r=>{const s=Cl(r.target.error);n(s)}})}let bu=!1;function Cl(e){const t=_n.S(ai());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bu||(bu=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}xl._e=-1;function Xi(e){return e==null}function mi(e){return e===0&&1/e==-1/0}function mE(e){return typeof e=="number"&&Number.isInteger(e)&&!mi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ts(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Od(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t,n){this.comparator=t,this.root=n||kt.EMPTY}insert(t,n){return new Et(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(t){return new Et(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fs(this.root,t,this.comparator,!0)}}class Fs{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class kt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new kt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const t=this.left.check();if(t!==this.right.check())throw Q();return t+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(t,n,r,s,i){return this}insert(t,n,r){return new kt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.comparator=t,this.data=new Et(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pu(this.data.getIterator())}getIteratorFrom(t){return new Pu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Mt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Mt(this.comparator);return n.data=t,n}}class Pu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.fields=t,t.sort(zt.comparator)}static empty(){return new Ye([])}unionWith(t){let n=new Mt(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ye(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return or(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Md("Invalid base64 string: "+i):i}}(t);return new Gt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Gt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const _E=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sn(e){if(bt(!!e),typeof e=="string"){let t=0;const n=_E.exec(e);if(bt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:It(e.seconds),nanos:It(e.nanos)}}function It(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Rn(e){return typeof e=="string"?Gt.fromBase64String(e):Gt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dl(e){const t=e.mapValue.fields.__previous_value__;return Vl(t)?Dl(t):t}function ls(e){const t=sn(e.mapValue.fields.__local_write_time__.timestampValue);return new xt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class cs{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new cs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof cs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vl(e)?4:vE(e)?9007199254740991:10:Q()}function De(e,t){if(e===t)return!0;const n=Pn(e);if(n!==Pn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ls(e).isEqual(ls(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=sn(s.timestampValue),a=sn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Rn(s.bytesValue).isEqual(Rn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return It(s.geoPointValue.latitude)===It(i.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return It(s.integerValue)===It(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=It(s.doubleValue),a=It(i.doubleValue);return o===a?mi(o)===mi(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return or(e.arrayValue.values||[],t.arrayValue.values||[],De);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Ru(o)!==Ru(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!De(o[l],a[l])))return!1;return!0}(e,t);default:return Q()}}function us(e,t){return(e.values||[]).find(n=>De(n,t))!==void 0}function ar(e,t){if(e===t)return 0;const n=Pn(e),r=Pn(t);if(n!==r)return at(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=It(i.integerValue||i.doubleValue),l=It(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Su(e.timestampValue,t.timestampValue);case 4:return Su(ls(e),ls(t));case 5:return at(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Rn(i),l=Rn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=at(a[c],l[c]);if(u!==0)return u}return at(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=at(It(i.latitude),It(o.latitude));return a!==0?a:at(It(i.longitude),It(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=ar(a[c],l[c]);if(u)return u}return at(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===Us.mapValue&&o===Us.mapValue)return 0;if(i===Us.mapValue)return 1;if(o===Us.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=at(l[h],u[h]);if(d!==0)return d;const g=ar(a[l[h]],c[u[h]]);if(g!==0)return g}return at(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Q()}}function Su(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=sn(e),r=sn(t),s=at(n.seconds,r.seconds);return s!==0?s:at(n.nanos,r.nanos)}function lr(e){return ya(e)}function ya(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=sn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Rn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return j.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ya(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ya(n.fields[o])}`;return s+"}"}(e.mapValue):Q()}function Cu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function va(e){return!!e&&"integerValue"in e}function kl(e){return!!e&&"arrayValue"in e}function xu(e){return!!e&&"nullValue"in e}function Vu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xo(e){return!!e&&"mapValue"in e}function Br(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ts(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Br(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Br(e.arrayValue.values[n]);return t}return Object.assign({},e)}function vE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.value=t}static empty(){return new Re({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!xo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Br(n)}setAll(t){let n=zt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Br(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());xo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return De(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];xo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Ts(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Re(Br(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new $t(t,0,G.min(),G.min(),G.min(),Re.empty(),0)}static newFoundDocument(t,n,r,s){return new $t(t,1,n,G.min(),r,s,0)}static newNoDocument(t,n){return new $t(t,2,n,G.min(),G.min(),Re.empty(),0)}static newUnknownDocument(t,n){return new $t(t,3,n,G.min(),G.min(),Re.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Re.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Re.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $t&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,n){this.position=t,this.inclusive=n}}function Du(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),n.key):r=ar(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ku(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!De(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t,n="asc"){this.field=t,this.dir=n}}function EE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{}class At extends Ld{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new TE(t,n,r):n==="array-contains"?new bE(t,r):n==="in"?new RE(t,r):n==="not-in"?new PE(t,r):n==="array-contains-any"?new SE(t,r):new At(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new IE(t,r):new AE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ar(n,this.value)):n!==null&&Pn(this.value)===Pn(n)&&this.matchesComparison(ar(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class me extends Ld{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new me(t,n)}matches(t){return Fd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Fd(e){return e.op==="and"}function Ud(e){return wE(e)&&Fd(e)}function wE(e){for(const t of e.filters)if(t instanceof me)return!1;return!0}function Ea(e){if(e instanceof At)return e.field.canonicalString()+e.op.toString()+lr(e.value);if(Ud(e))return e.filters.map(t=>Ea(t)).join(",");{const t=e.filters.map(n=>Ea(n)).join(",");return`${e.op}(${t})`}}function Bd(e,t){return e instanceof At?function(r,s){return s instanceof At&&r.op===s.op&&r.field.isEqual(s.field)&&De(r.value,s.value)}(e,t):e instanceof me?function(r,s){return s instanceof me&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Bd(o,s.filters[a]),!0):!1}(e,t):void Q()}function $d(e){return e instanceof At?function(n){return`${n.field.canonicalString()} ${n.op} ${lr(n.value)}`}(e):e instanceof me?function(n){return n.op.toString()+" {"+n.getFilters().map($d).join(" ,")+"}"}(e):"Filter"}class TE extends At{constructor(t,n,r){super(t,n,r),this.key=j.fromName(r.referenceValue)}matches(t){const n=j.comparator(t.key,this.key);return this.matchesComparison(n)}}class IE extends At{constructor(t,n){super(t,"in",n),this.keys=jd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class AE extends At{constructor(t,n){super(t,"not-in",n),this.keys=jd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function jd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}class bE extends At{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return kl(n)&&us(n.arrayValue,this.value)}}class RE extends At{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&us(this.value.arrayValue,n)}}class PE extends At{constructor(t,n){super(t,"not-in",n)}matches(t){if(us(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!us(this.value.arrayValue,n)}}class SE extends At{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!kl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>us(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Nu(e,t=null,n=[],r=[],s=null,i=null,o=null){return new CE(e,t,n,r,s,i,o)}function Nl(e){const t=rt(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Ea(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>lr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>lr(r)).join(",")),t.ce=n}return t.ce}function Ol(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!EE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Bd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ku(e.startAt,t.startAt)&&ku(e.endAt,t.endAt)}function wa(e){return j.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function xE(e,t,n,r,s,i,o,a){return new yr(e,t,n,r,s,i,o,a)}function Ml(e){return new yr(e)}function Ou(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function qd(e){return e.collectionGroup!==null}function $r(e){const t=rt(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mt(zt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new hs(i,r))}),n.has(zt.keyField().canonicalString())||t.le.push(new hs(zt.keyField(),r))}return t.le}function Ce(e){const t=rt(e);return t.he||(t.he=VE(t,$r(e))),t.he}function VE(e,t){if(e.limitType==="F")return Nu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new hs(s.field,i)});const n=e.endAt?new _i(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _i(e.startAt.position,e.startAt.inclusive):null;return Nu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ta(e,t){const n=e.filters.concat([t]);return new yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ia(e,t,n){return new yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ji(e,t){return Ol(Ce(e),Ce(t))&&e.limitType===t.limitType}function zd(e){return`${Nl(Ce(e))}|lt:${e.limitType}`}function Fn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>$d(s)).join(", ")}]`),Xi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>lr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>lr(s)).join(",")),`Target(${r})`}(Ce(e))}; limitType=${e.limitType})`}function Zi(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):j.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of $r(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Du(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,$r(r),s)||r.endAt&&!function(o,a,l){const c=Du(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,$r(r),s))}(e,t)}function DE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hd(e){return(t,n)=>{let r=!1;for(const s of $r(e)){const i=kE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function kE(e,t,n){const r=e.field.isKeyField()?j.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ar(l,c):Q()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ts(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Od(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Et(j.comparator);function on(){return NE}const Kd=new Et(j.comparator);function Vr(...e){let t=Kd;for(const n of e)t=t.insert(n.key,n);return t}function OE(e){let t=Kd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function yn(){return jr()}function Gd(){return jr()}function jr(){return new vr(e=>e.toString(),(e,t)=>e.isEqual(t))}const ME=new Mt(j.comparator);function nt(...e){let t=ME;for(const n of e)t=t.add(n);return t}const LE=new Mt(at);function FE(){return LE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mi(t)?"-0":t}}function Wd(e){return{integerValue:""+e}}function UE(e,t){return mE(t)?Wd(t):Qd(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this._=void 0}}function BE(e,t,n){return e instanceof Aa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vl(i)&&(i=Dl(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof yi?Yd(e,t):e instanceof vi?Xd(e,t):function(s,i){const o=jE(s,i),a=Mu(o)+Mu(s.Ie);return va(o)&&va(s.Ie)?Wd(a):Qd(s.serializer,a)}(e,t)}function $E(e,t,n){return e instanceof yi?Yd(e,t):e instanceof vi?Xd(e,t):n}function jE(e,t){return e instanceof ba?function(r){return va(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Aa extends to{}class yi extends to{constructor(t){super(),this.elements=t}}function Yd(e,t){const n=Jd(t);for(const r of e.elements)n.some(s=>De(s,r))||n.push(r);return{arrayValue:{values:n}}}class vi extends to{constructor(t){super(),this.elements=t}}function Xd(e,t){let n=Jd(t);for(const r of e.elements)n=n.filter(s=>!De(s,r));return{arrayValue:{values:n}}}class ba extends to{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Mu(e){return It(e.integerValue||e.doubleValue)}function Jd(e){return kl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function qE(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof yi&&s instanceof yi||r instanceof vi&&s instanceof vi?or(r.elements,s.elements,De):r instanceof ba&&s instanceof ba?De(r.Ie,s.Ie):r instanceof Aa&&s instanceof Aa}(e.transform,t.transform)}class In{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new In}static exists(t){return new In(void 0,t)}static updateTime(t){return new In(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Qs(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ll{}function Zd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new HE(e.key,In.none()):new Fl(e.key,e.data,In.none());{const n=e.data,r=Re.empty();let s=new Mt(zt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new eo(e.key,r,new Ye(s.toArray()),In.none())}}function zE(e,t,n){e instanceof Fl?function(s,i,o){const a=s.value.clone(),l=Fu(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof eo?function(s,i,o){if(!Qs(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Fu(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(tp(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function qr(e,t,n,r){return e instanceof Fl?function(i,o,a,l){if(!Qs(i.precondition,o))return a;const c=i.value.clone(),u=Uu(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof eo?function(i,o,a,l){if(!Qs(i.precondition,o))return a;const c=Uu(i.fieldTransforms,l,o),u=o.data;return u.setAll(tp(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Qs(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Lu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&or(r,s,(i,o)=>qE(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Fl extends Ll{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class eo extends Ll{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Fu(e,t,n){const r=new Map;bt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,$E(o,a,n[s]))}return r}function Uu(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,BE(i,o,t))}return r}class HE extends Ll{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&zE(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=qr(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=qr(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Gd();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Zd(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&or(this.mutations,t.mutations,(n,r)=>Lu(n,r))&&or(this.baseMutations,t.baseMutations,(n,r)=>Lu(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Z;function ep(e){if(e===void 0)return Ve("GRPC error has no .code"),T.UNKNOWN;switch(e){case Tt.OK:return T.OK;case Tt.CANCELLED:return T.CANCELLED;case Tt.UNKNOWN:return T.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return T.INTERNAL;case Tt.UNAVAILABLE:return T.UNAVAILABLE;case Tt.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Tt.NOT_FOUND:return T.NOT_FOUND;case Tt.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Tt.ABORTED:return T.ABORTED;case Tt.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Tt.DATA_LOSS:return T.DATA_LOSS;default:return Q()}}(Z=Tt||(Tt={}))[Z.OK=0]="OK",Z[Z.CANCELLED=1]="CANCELLED",Z[Z.UNKNOWN=2]="UNKNOWN",Z[Z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Z[Z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Z[Z.NOT_FOUND=5]="NOT_FOUND",Z[Z.ALREADY_EXISTS=6]="ALREADY_EXISTS",Z[Z.PERMISSION_DENIED=7]="PERMISSION_DENIED",Z[Z.UNAUTHENTICATED=16]="UNAUTHENTICATED",Z[Z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Z[Z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Z[Z.ABORTED=10]="ABORTED",Z[Z.OUT_OF_RANGE=11]="OUT_OF_RANGE",Z[Z.UNIMPLEMENTED=12]="UNIMPLEMENTED",Z[Z.INTERNAL=13]="INTERNAL",Z[Z.UNAVAILABLE=14]="UNAVAILABLE",Z[Z.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Yn([4294967295,4294967295],0);function Bu(e){const t=WE().encode(e),n=new J0;return n.update(t),new Uint8Array(n.digest())}function $u(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Yn([n,r],0),new Yn([s,i],0)]}class Ul{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dr(`Invalid padding: ${n}`);if(r<0)throw new Dr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Dr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Dr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Yn.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(Yn.fromNumber(r)));return s.compare(YE)===1&&(s=new Yn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Bu(t),[r,s]=$u(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Ul(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Bu(t),[r,s]=$u(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Dr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Is.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new no(G.min(),s,new Et(at),on(),nt())}}class Is{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Is(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class np{constructor(t,n){this.targetId=t,this.fe=n}}class rp{constructor(t,n,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ju{constructor(){this.ge=0,this.pe=zu(),this.ye=Gt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=nt(),n=nt(),r=nt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new Is(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=zu()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,bt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class XE{constructor(t){this.Le=t,this.ke=new Map,this.qe=on(),this.Qe=qu(),this.Ke=new Et(at)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:Q()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(wa(i))if(r===0){const o=new j(i.path);this.We(n,o,$t.newNoDocument(o,G.min()))}else bt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Rn(r).toUint8Array()}catch(l){if(l instanceof Md)return ir("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ul(o,s,i)}catch(l){return ir(l instanceof Dr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&wa(a.target)){const l=new j(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,$t.newNoDocument(l,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=nt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new no(t,n,this.Ke,this.qe,r);return this.qe=on(),this.Qe=qu(),this.Ke=new Et(at),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new ju,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Mt(at),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||x("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new ju),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function qu(){return new Et(j.comparator)}function zu(){return new Et(j.comparator)}const JE={asc:"ASCENDING",desc:"DESCENDING"},ZE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tw={and:"AND",or:"OR"};class ew{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ra(e,t){return e.useProto3Json||Xi(t)?t:{value:t}}function Pa(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xn(e){return bt(!!e),G.fromTimestamp(function(n){const r=sn(n);return new xt(r.seconds,r.nanos)}(e))}function ip(e,t){return Sa(e,t).canonicalString()}function Sa(e,t){const n=function(s){return new yt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function op(e){const t=yt.fromString(e);return bt(hp(t)),t}function Vo(e,t){const n=op(t);if(n.get(1)!==e.databaseId.projectId)throw new M(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new j(lp(n))}function ap(e,t){return ip(e.databaseId,t)}function nw(e){const t=op(e);return t.length===4?yt.emptyPath():lp(t)}function Hu(e){return new yt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function lp(e){return bt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function rw(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Q()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(bt(u===void 0||typeof u=="string"),Gt.fromBase64String(u||"")):(bt(u===void 0||u instanceof Uint8Array),Gt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?T.UNKNOWN:ep(c.code);return new M(u,c.message||"")}(o);n=new rp(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vo(e,r.document.name),i=Xn(r.document.updateTime),o=r.document.createTime?Xn(r.document.createTime):G.min(),a=new Re({mapValue:{fields:r.document.fields}}),l=$t.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ws(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Vo(e,r.document),i=r.readTime?Xn(r.readTime):G.min(),o=$t.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ws([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Vo(e,r.document),i=r.removedTargetIds||[];n=new Ws([],i,s,null)}else{if(!("filter"in t))return Q();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new QE(s,i),a=r.targetId;n=new np(a,o)}}return n}function sw(e,t){return{documents:[ap(e,t.path)]}}function iw(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ap(e,s);const i=function(c){if(c.length!==0)return up(me.create(c,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Un(d.field),direction:lw(d.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ra(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ut:n,parent:s}}function ow(e){let t=nw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){bt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const d=cp(h);return d instanceof me&&Ud(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(I){return new hs(Bn(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Xi(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,g=h.values||[];return new _i(g,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,g=h.values||[];return new _i(g,d)}(n.endAt)),xE(t,s,o,i,a,"F",l,c)}function aw(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function cp(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bn(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bn(n.unaryFilter.field);return At.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bn(n.unaryFilter.field);return At.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bn(n.unaryFilter.field);return At.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(e):e.fieldFilter!==void 0?function(n){return At.create(Bn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return me.create(n.compositeFilter.filters.map(r=>cp(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(e):Q()}function lw(e){return JE[e]}function cw(e){return ZE[e]}function uw(e){return tw[e]}function Un(e){return{fieldPath:e.canonicalString()}}function Bn(e){return zt.fromServerFormat(e.fieldPath)}function up(e){return e instanceof At?function(n){if(n.op==="=="){if(Vu(n.value))return{unaryFilter:{field:Un(n.field),op:"IS_NAN"}};if(xu(n.value))return{unaryFilter:{field:Un(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vu(n.value))return{unaryFilter:{field:Un(n.field),op:"IS_NOT_NAN"}};if(xu(n.value))return{unaryFilter:{field:Un(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Un(n.field),op:cw(n.op),value:n.value}}}(e):e instanceof me?function(n){const r=n.getFilters().map(s=>up(s));return r.length===1?r[0]:{compositeFilter:{op:uw(n.op),filters:r}}}(e):Q()}function hp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t,n,r,s,i=G.min(),o=G.min(),a=Gt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Xe(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t){this.ct=t}}function fw(e){const t=ow({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ia(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this._n=new pw}addToCollectionParentIndex(t,n){return this._n.add(n),E.resolve()}getCollectionParents(t,n){return E.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return E.resolve()}deleteFieldIndex(t,n){return E.resolve()}deleteAllFieldIndexes(t){return E.resolve()}createTargetIndexes(t,n){return E.resolve()}getDocumentsMatchingTarget(t,n){return E.resolve(null)}getIndexType(t,n){return E.resolve(0)}getFieldIndexes(t,n){return E.resolve([])}getNextCollectionGroupToUpdate(t){return E.resolve(null)}getMinOffset(t,n){return E.resolve(rn.min())}getMinOffsetFromCollectionGroup(t,n){return E.resolve(rn.min())}updateCollectionGroup(t,n,r){return E.resolve()}updateIndexEntries(t,n){return E.resolve()}}class pw{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Mt(yt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Mt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new cr(0)}static Bn(){return new cr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.changes=new vr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$t.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?E.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&qr(r.mutation,s,Ye.empty(),xt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,nt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=nt()){const s=yn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=Vr();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=yn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,nt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=on();const o=jr(),a=function(){return jr()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof eo)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),qr(u.mutation,c,u.mutation.getFieldMask(),xt.now())):o.set(c.key,Ye.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new mw(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=jr();let s=new Et((o,a)=>o-a),i=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Ye.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||nt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Gd();u.forEach(d=>{if(!i.has(d)){const g=Zd(n.get(d),r.get(d));g!==null&&h.set(d,g),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):qd(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):E.resolve(yn());let a=-1,l=i;return o.next(c=>E.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?E.resolve():this.remoteDocumentCache.getEntry(t,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,nt())).next(u=>({batchId:a,changes:OE(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new j(n)).next(r=>{let s=Vr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=Vr();return this.indexManager.getCollectionParents(t,i).next(a=>E.forEach(a,l=>{const c=function(h,d){return new yr(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,$t.newInvalidDocument(u)))});let a=Vr();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&qr(u.mutation,c,Ye.empty(),xt.now()),Zi(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return E.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xn(s.createTime)}}(n)),E.resolve()}getNamedQuery(t,n){return E.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:fw(s.bundledQuery),readTime:Xn(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.overlays=new Et(j.comparator),this.hr=new Map}getOverlay(t,n){return E.resolve(this.overlays.get(n))}getOverlays(t,n){const r=yn();return E.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),E.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),E.resolve()}getOverlaysForCollection(t,n,r){const s=yn(),i=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return E.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Et((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=yn(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=yn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return E.resolve(a)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GE(n,r));let i=this.hr.get(n);i===void 0&&(i=nt(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.Pr=new Mt(Ct.Ir),this.Tr=new Mt(Ct.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ct(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ct(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new j(new yt([])),r=new Ct(n,t),s=new Ct(n,t+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new j(new yt([])),r=new Ct(n,t),s=new Ct(n,t+1);let i=nt();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Ct(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ct{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return j.comparator(t.key,n.key)||at(t.pr,n.pr)}static Er(t,n){return at(t.pr,n.pr)||j.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mt(Ct.Ir)}checkEmpty(t){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Ct(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(t,n){return E.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.br(r),i=s<0?0:s;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ct(n,0),s=new Ct(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Mt(at);return n.forEach(s=>{const i=new Ct(s,0),o=new Ct(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),E.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;j.isDocumentKey(i)||(i=i.child(""));const o=new Ct(new j(i),0);let a=new Mt(at);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),E.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){bt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return E.forEach(n.mutations,s=>{const i=new Ct(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ct(n,0),s=this.wr.firstAfterOrEqual(r);return E.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,E.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t){this.vr=t,this.docs=function(){return new Et(j.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(t,n){let r=on();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$t.newInvalidDocument(s))}),E.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=on();const o=n.path,a=new j(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||hE(uE(u),r)<=0||(s.has(u.key)||Zi(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return E.resolve(i)}getAllFromCollectionGroup(t,n,r,s){Q()}Fr(t,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Tw(this)}getSize(t){return E.resolve(this.size)}}class Tw extends gw{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(r)}),E.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t){this.persistence=t,this.Mr=new vr(n=>Nl(n),Ol),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Bl,this.targetCount=0,this.Br=cr.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,s)=>n(s)),E.resolve()}getLastRemoteSnapshotVersion(t){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return E.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),E.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Br=new cr(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,E.resolve()}updateTargetData(t,n){return this.qn(n),E.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),E.waitFor(i).next(()=>s)}getTargetCount(t){return E.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return E.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),E.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),E.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return E.resolve(r)}containsKey(t,n){return E.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(t,n){this.Lr={},this.overlays={},this.kr=new xl(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Iw(this),this.indexManager=new dw,this.remoteDocumentCache=function(s){return new ww(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new hw(n),this.$r=new yw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new vw,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new Ew(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){x("MemoryPersistence","Starting transaction:",t);const s=new bw(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(t,n){return E.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}}class bw extends dE{constructor(t){super(),this.currentSequenceNumber=t}}class $l{constructor(t){this.persistence=t,this.zr=new Bl,this.jr=null}static Hr(t){return new $l(t)}get Jr(){if(this.jr)return this.jr;throw Q()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),E.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),E.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Jr,r=>{const s=j.fromPath(r);return this.Yr(t,s).next(i=>{i||n.removeEntry(s,G.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return E.or([()=>E.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(t,n){let r=nt(),s=nt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ny()?8:_n.v(ai())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ji(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Rw;return this.Ji(t,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>i.result)}Yi(t,n,r,s){return r.documentReadCount<this.Wi?(Pr()<=et.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Fn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),E.resolve()):(Pr()<=et.DEBUG&&x("QueryEngine","Query:",Fn(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Pr()<=et.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Fn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ce(n))):E.resolve())}ji(t,n){if(Ou(n))return E.resolve(null);let r=Ce(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ia(n,null,"F"),r=Ce(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=nt(...i);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(t,Ia(n,null,"F")):this.es(t,c,n,l)}))})))}Hi(t,n,r,s){return Ou(n)||s.isEqual(G.min())?E.resolve(null):this.zi.getDocuments(t,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?E.resolve(null):(Pr()<=et.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fn(n)),this.es(t,o,n,cE(s,-1)).next(a=>a))})}Zi(t,n){let r=new Mt(Hd(t));return n.forEach((s,i)=>{Zi(t,i)&&(r=r.add(i))}),r}Xi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(t,n,r){return Pr()<=et.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Fn(n)),this.zi.getDocumentsMatchingQuery(t,n,rn.min(),r)}es(t,n,r,s){return this.zi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t,n,r,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new Et(at),this.rs=new vr(i=>Nl(i),Ol),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _w(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function Cw(e,t,n,r){return new Sw(e,t,n,r)}async function fp(e,t){const n=rt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=nt();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function dp(e){const t=rt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function xw(e,t){const n=rt(e),r=t.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];t.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let g=d.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?g=g.withResumeToken(Gt.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(h,g),function(S,A,V){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(d,g,u)&&a.push(n.Qr.updateTargetData(i,g))});let l=on(),c=nt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(Vw(i,o,t.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(G.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function Vw(e,t,n){let r=nt(),s=nt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=on();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(G.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function Dw(e,t){const n=rt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,t).next(i=>i?(s=i,E.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Xe(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Ca(e,t,n){const r=rt(e),s=r.ns.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ws(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(s.target)}function Ku(e,t,n){const r=rt(e);let s=G.min(),i=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=rt(l),d=h.rs.get(u);return d!==void 0?E.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,Ce(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?s:G.min(),n?i:nt())).next(a=>(kw(r,DE(t),a),{documents:a,hs:i})))}function kw(e,t,n){let r=e.ss.get(t)||G.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.ss.set(t,r)}class Gu{constructor(){this.activeTargetIds=FE()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Nw{constructor(){this.no=new Gu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Gu,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs=null;function Do(){return Bs===null?Bs=function(){return 268435456+Math.round(2147483648*Math.random())}():Bs++,"0x"+Bs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class Fw extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Do(),l=this.bo(n,r.toUriEncodedString());x("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>(x("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw ir("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_r}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=Mw[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,s){const i=Do();return new Promise((o,a)=>{const l=new X0;l.setWithCredentials(!0),l.listenOnce(W0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Co.NO_ERROR:const u=l.getResponseJson();x(Ut,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case Co.TIMEOUT:x(Ut,`RPC '${t}' ${i} timed out`),a(new M(T.DEADLINE_EXCEEDED,"Request time out"));break;case Co.HTTP_ERROR:const h=l.getStatus();if(x(Ut,`RPC '${t}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const g=d==null?void 0:d.error;if(g&&g.status&&g.message){const I=function(A){const V=A.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(V)>=0?V:T.UNKNOWN}(g.status);a(new M(I,g.message))}else a(new M(T.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new M(T.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{x(Ut,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);x(Ut,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(t,n,r){const s=Do(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=G0(),a=Q0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");x(Ut,`Creating RPC '${t}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,g=!1;const I=new Lw({lo:A=>{g?x(Ut,`Not sending because RPC '${t}' stream ${s} is closed:`,A):(d||(x(Ut,`Opening RPC '${t}' stream ${s} transport.`),h.open(),d=!0),x(Ut,`RPC '${t}' stream ${s} sending:`,A),h.send(A))},ho:()=>h.close()}),S=(A,V,F)=>{A.listen(V,B=>{try{F(B)}catch(Y){setTimeout(()=>{throw Y},0)}})};return S(h,Ls.EventType.OPEN,()=>{g||x(Ut,`RPC '${t}' stream ${s} transport opened.`)}),S(h,Ls.EventType.CLOSE,()=>{g||(g=!0,x(Ut,`RPC '${t}' stream ${s} transport closed`),I.Vo())}),S(h,Ls.EventType.ERROR,A=>{g||(g=!0,ir(Ut,`RPC '${t}' stream ${s} transport errored:`,A),I.Vo(new M(T.UNAVAILABLE,"The operation could not be completed")))}),S(h,Ls.EventType.MESSAGE,A=>{var V;if(!g){const F=A.data[0];bt(!!F);const B=F,Y=B.error||((V=B[0])===null||V===void 0?void 0:V.error);if(Y){x(Ut,`RPC '${t}' stream ${s} received error:`,Y);const ft=Y.status;let q=function($e){const ne=Tt[$e];if(ne!==void 0)return ep(ne)}(ft),wt=Y.message;q===void 0&&(q=T.INTERNAL,wt="Unknown error status: "+ft+" with message "+Y.message),g=!0,I.Vo(new M(q,wt)),h.close()}else x(Ut,`RPC '${t}' stream ${s} received:`,F),I.mo(F)}}),S(a,Y0.STAT_EVENT,A=>{A.stat===Iu.PROXY?x(Ut,`RPC '${t}' stream ${s} detected buffering proxy`):A.stat===Iu.NOPROXY&&x(Ut,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.Ro()},0),I}}function ko(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(e){return new ew(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t,n,r=1e3,s=1.5,i=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&x("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(t,n,r,s,i,o,a,l){this.oi=t,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new pp(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(Ve(n.toString()),Ve("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{t(()=>{const s=new M(T.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return x("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bw extends Uw{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=rw(this.serializer,t),r=function(i){if(!("targetChange"in i))return G.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?Xn(o.readTime):G.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=Hu(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=wa(l)?{documents:sw(i,l)}:{query:iw(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sp(i,o.resumeToken);const c=Ra(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(G.min())>0){a.readTime=Pa(i,o.snapshotVersion.toTimestamp());const c=Ra(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=aw(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=Hu(this.serializer),n.removeTarget=t,this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new M(T.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(t,Sa(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(T.UNKNOWN,i.toString())})}vo(t,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,Sa(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(T.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class jw{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ve(n),this.g_=!1):x("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{bs(this)&&(x("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=rt(l);c.v_.add(4),await As(c),c.x_.set("Unknown"),c.v_.delete(4),await so(c)}(this))})}),this.x_=new jw(r,s)}}async function so(e){if(bs(e))for(const t of e.F_)await t(!0)}async function As(e){for(const t of e.F_)await t(!1)}function gp(e,t){const n=rt(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Hl(n)?zl(n):Er(n).Jo()&&ql(n,t))}function mp(e,t){const n=rt(e),r=Er(n);n.C_.delete(t),r.Jo()&&_p(n,t),n.C_.size===0&&(r.Jo()?r.Xo():bs(n)&&n.x_.set("Unknown"))}function ql(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(G.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Er(e).c_(t)}function _p(e,t){e.O_.Oe(t),Er(e).l_(t)}function zl(e){e.O_=new XE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Er(e).start(),e.x_.p_()}function Hl(e){return bs(e)&&!Er(e).Ho()&&e.C_.size>0}function bs(e){return rt(e).v_.size===0}function yp(e){e.O_=void 0}async function zw(e){e.C_.forEach((t,n)=>{ql(e,t)})}async function Hw(e,t){yp(e),Hl(e)?(e.x_.S_(t),zl(e)):e.x_.set("Unknown")}async function Kw(e,t,n){if(e.x_.set("Online"),t instanceof rp&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(e,t)}catch(r){x("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Wu(e,r)}else if(t instanceof Ws?e.O_.$e(t):t instanceof np?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(G.min()))try{const r=await dp(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(Gt.EMPTY_BYTE_STRING,u.snapshotVersion)),_p(i,l);const h=new Xe(u.target,l,c,u.sequenceNumber);ql(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){x("RemoteStore","Failed to raise snapshot:",r),await Wu(e,r)}}async function Wu(e,t,n){if(!ws(t))throw t;e.v_.add(1),await As(e),e.x_.set("Offline"),n||(n=()=>dp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{x("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await so(e)})}async function Yu(e,t){const n=rt(e);n.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const r=bs(n);n.v_.add(3),await As(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await so(n)}async function Gw(e,t){const n=rt(e);t?(n.v_.delete(2),await so(n)):t||(n.v_.add(2),await As(n),n.x_.set("Unknown"))}function Er(e){return e.N_||(e.N_=function(n,r,s){const i=rt(n);return i.R_(),new Bw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:zw.bind(null,e),To:Hw.bind(null,e),u_:Kw.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),Hl(e)?zl(e):e.x_.set("Unknown")):(await e.N_.stop(),yp(e))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new Kl(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(T.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(e,t){if(Ve("AsyncQueue",`${t}: ${e}`),ws(e))return new M(T.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this.comparator=t?(n,r)=>t(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=Vr(),this.sortedSet=new Et(this.comparator)}static emptySet(t){return new Jn(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Jn)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Jn;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this.L_=new Et(j.comparator)}track(t){const n=t.doc.key,r=this.L_.get(n);r?t.type!==0&&r.type===3?this.L_=this.L_.insert(n,t):t.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.L_=this.L_.remove(n):t.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):Q():this.L_=this.L_.insert(n,t)}k_(){const t=[];return this.L_.inorderTraversal((n,r)=>{t.push(r)}),t}}class ur{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ur(t,n,Jn.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ji(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.q_=void 0,this.Q_=[]}}class Ww{constructor(){this.queries=new vr(t=>zd(t),Ji),this.onlineState="Unknown",this.K_=new Set}}async function Yw(e,t){const n=rt(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Qw),s)try{i.q_=await n.onListen(r)}catch(o){const a=vp(o,`Initialization of query '${Fn(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.Q_.push(t),t.U_(n.onlineState),i.q_&&t.W_(i.q_)&&Gl(n)}async function Xw(e,t){const n=rt(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(t);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Jw(e,t){const n=rt(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&Gl(n)}function Zw(e,t,n){const r=rt(e),s=r.queries.get(t);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(t)}function Gl(e){e.K_.forEach(t=>{t.next()})}class tT{constructor(t,n,r){this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new ur(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.z_?this.H_(t)&&(this.G_.next(t),n=!0):this.J_(t,this.onlineState)&&(this.Y_(t),n=!0),this.j_=t,n}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),n=!0),n}J_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}H_(t){if(t.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(t){t=ur.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t){this.key=t}}class wp{constructor(t){this.key=t}}class eT{constructor(t,n){this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=nt(),this.mutatedKeys=nt(),this.ua=Hd(t),this.ca=new Jn(this.ua)}get la(){return this.oa}ha(t,n){const r=n?n.Pa:new Xu,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const d=s.get(u),g=Zi(this.query,h)?h:null,I=!!d&&this.mutatedKeys.has(d.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;d&&g?d.data.isEqual(g.data)?I!==S&&(r.track({type:3,doc:g}),A=!0):this.Ia(d,g)||(r.track({type:2,doc:g}),A=!0,(l&&this.ua(g,l)>0||c&&this.ua(g,c)<0)&&(a=!0)):!d&&g?(r.track({type:0,doc:g}),A=!0):d&&!g&&(r.track({type:1,doc:d}),A=!0,(l||c)&&(a=!0)),A&&(g?(o=o.add(g),i=S?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const o=t.Pa.k_();o.sort((u,h)=>function(g,I){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return S(g)-S(I)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(r),s=s!=null&&s;const a=n&&!s?this.Ea():[],l=this.aa.size===0&&this.current&&!s?1:0,c=l!==this._a;return this._a=l,o.length!==0||c?{snapshot:new ur(this.query,t.ca,i,o,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Xu,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=nt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return t.forEach(r=>{this.aa.has(r)||n.push(new wp(r))}),this.aa.forEach(r=>{t.has(r)||n.push(new Ep(r))}),n}Ra(t){this.oa=t.hs,this.aa=nt();const n=this.ha(t.documents);return this.applyChanges(n,!0)}Va(){return ur.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class nT{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class rT{constructor(t){this.key=t,this.ma=!1}}class sT{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new vr(a=>zd(a),Ji),this.pa=new Map,this.ya=new Set,this.wa=new Et(j.comparator),this.Sa=new Map,this.ba=new Bl,this.Da={},this.Ca=new Map,this.va=cr.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function iT(e,t){const n=fT(e);let r,s;const i=n.ga.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await Dw(n.localStore,Ce(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await oT(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&gp(n.remoteStore,o)}return s}async function oT(e,t,n,r,s){e.Ma=(h,d,g)=>async function(S,A,V,F){let B=A.view.ha(V);B.Xi&&(B=await Ku(S.localStore,A.query,!1).then(({documents:wt})=>A.view.ha(wt,B)));const Y=F&&F.targetChanges.get(A.targetId),ft=F&&F.targetMismatches.get(A.targetId)!=null,q=A.view.applyChanges(B,S.isPrimaryClient,Y,ft);return Zu(S,A.targetId,q.da),q.snapshot}(e,h,d,g);const i=await Ku(e.localStore,t,!0),o=new eT(t,i.hs),a=o.ha(i.documents),l=Is.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);Zu(e,n,c.da);const u=new nT(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),c.snapshot}async function aT(e,t){const n=rt(e),r=n.ga.get(t),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!Ji(i,t))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ca(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),mp(n.remoteStore,r.targetId),xa(n,r.targetId)}).catch(Pl)):(xa(n,r.targetId),await Ca(n.localStore,r.targetId,!0))}async function Tp(e,t){const n=rt(e);try{const r=await xw(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(bt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?bt(o.ma):s.removedDocuments.size>0&&(bt(o.ma),o.ma=!1))}),await Ap(n,r,t)}catch(r){await Pl(r)}}function Ju(e,t,n){const r=rt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=rt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.U_(a)&&(c=!0)}),c&&Gl(l)}(r.eventManager,t),s.length&&r.fa.u_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function lT(e,t,n){const r=rt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Sa.get(t),i=s&&s.key;if(i){let o=new Et(j.comparator);o=o.insert(i,$t.newNoDocument(i,G.min()));const a=nt().add(i),l=new no(G.min(),new Map,new Et(at),o,a);await Tp(r,l),r.wa=r.wa.remove(i),r.Sa.delete(t),Ql(r)}else await Ca(r.localStore,t,!1).then(()=>xa(r,t,n)).catch(Pl)}function xa(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach(r=>{e.ba.containsKey(r)||Ip(e,r)})}function Ip(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);n!==null&&(mp(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Ql(e))}function Zu(e,t,n){for(const r of n)r instanceof Ep?(e.ba.addReference(r.key,t),cT(e,r)):r instanceof wp?(x("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Ip(e,r.key)):Q()}function cT(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(x("SyncEngine","New document in limbo: "+n),e.ya.add(r),Ql(e))}function Ql(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new j(yt.fromString(t)),r=e.va.next();e.Sa.set(r,new rT(n)),e.wa=e.wa.insert(n,r),gp(e.remoteStore,new Xe(Ce(Ml(n.path)),r,"TargetPurposeLimboResolution",xl._e))}}async function Ap(e,t,n){const r=rt(e),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=jl.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.fa.u_(s),await async function(l,c){const u=rt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>E.forEach(c,d=>E.forEach(d.qi,g=>u.persistence.referenceDelegate.addReference(h,d.targetId,g)).next(()=>E.forEach(d.Qi,g=>u.persistence.referenceDelegate.removeReference(h,d.targetId,g)))))}catch(h){if(!ws(h))throw h;x("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const g=u.ns.get(d),I=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(I);u.ns=u.ns.insert(d,S)}}}(r.localStore,i))}async function uT(e,t){const n=rt(e);if(!n.currentUser.isEqual(t)){x("SyncEngine","User change. New user:",t.toKey());const r=await fp(n.localStore,t);n.currentUser=t,function(i,o){i.Ca.forEach(a=>{a.forEach(l=>{l.reject(new M(T.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ap(n,r.us)}}function hT(e,t){const n=rt(e),r=n.Sa.get(t);if(r&&r.ma)return nt().add(r.key);{let s=nt();const i=n.pa.get(t);if(!i)return s;for(const o of i){const a=n.ga.get(o);s=s.unionWith(a.view.la)}return s}}function fT(e){const t=rt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lT.bind(null,t),t.fa.u_=Jw.bind(null,t.eventManager),t.fa.xa=Zw.bind(null,t.eventManager),t}class th{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=ro(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return Cw(this.persistence,new Pw,t.initialUser,this.serializer)}createPersistence(t){return new Aw($l.Hr,this.serializer)}createSharedClientState(t){return new Nw}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dT{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ju(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uT.bind(null,this.syncEngine),await Gw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Ww}()}createDatastore(t){const n=ro(t.databaseInfo.databaseId),r=function(i){return new Fw(i)}(t.databaseInfo);return function(i,o,a,l){return new $w(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new qw(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Ju(this.syncEngine,n,0),function(){return Qu.D()?new Qu:new Ow}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const h=new sT(s,i,o,a,l,c);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const s=rt(r);x("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await As(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Ve("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Bt.UNAUTHENTICATED,this.clientId=aE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{x("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(x("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=vp(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function No(e,t){e.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await fp(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function eh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _T(e);x("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Yu(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>Yu(t.remoteStore,s)),e._onlineComponents=t}function mT(e){return e.name==="FirebaseError"?e.code===T.FAILED_PRECONDITION||e.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function _T(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{await No(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!mT(n))throw n;ir("Error using user provided cache. Falling back to memory cache: "+n),await No(e,new th)}}else x("FirestoreClient","Using default OfflineComponentProvider"),await No(e,new th);return e._offlineComponents}async function yT(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),await eh(e,e._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),await eh(e,new dT))),e._onlineComponents}async function nh(e){const t=await yT(e),n=t.eventManager;return n.onListen=iT.bind(null,t.syncEngine),n.onUnlisten=aT.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(e,t,n){if(!n)throw new M(T.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ET(e,t,n,r){if(t===!0&&r===!0)throw new M(T.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function sh(e){if(j.isDocumentKey(e))throw new M(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function io(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Q()}function Ys(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=io(e);throw new M(T.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new M(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new M(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ET("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bp((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(T.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(T.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(T.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wl{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ih({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new M(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ih(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Z0;switch(r.type){case"firstParty":return new rE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rh.get(n);r&&(x("ComponentProvider","Removing Datastore"),rh.delete(n),r.terminate())}(this),Promise.resolve()}}function wT(e,t,n,r={}){var s;const i=(e=Ys(e,Wl))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Bt.MOCK_USER;else{a=Dy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new M(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bt(c)}e._authCredentials=new tE(new Nd(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Vn(this.firestore,t,this._query)}}class ke{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ke(this.firestore,t,this._key)}}class Zn extends Vn{constructor(t,n,r){super(t,n,Ml(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ke(this.firestore,null,new j(t))}withConverter(t){return new Zn(this.firestore,t,this._path)}}function TT(e,t,...n){if(e=Yr(e),vT("collection","path",t),e instanceof Wl){const r=yt.fromString(t,...n);return sh(r),new Zn(e,null,r)}{if(!(e instanceof ke||e instanceof Zn))throw new M(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(yt.fromString(t,...n));return sh(r),new Zn(e.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new pp(this,"async_queue_retry"),this._u=()=>{const n=ko();n&&x("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=ko();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const n=ko();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});const n=new Tn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!ws(t))throw t;x("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(t){const n=this.Xa.then(()=>(this.iu=!0,t().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ve("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(t,n,r){this.au(),this.ou.indexOf(t)>-1&&(n=0);const s=Kl.createAndSchedule(this,t,n,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&Q()}verifyOperationInProgress(){}async hu(){let t;do t=this.Xa,await t;while(t!==this.Xa)}Pu(t){for(const n of this.nu)if(n.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){const n=this.nu.indexOf(t);this.nu.splice(n,1)}}function oh(e){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(e,["next","error","complete"])}class Va extends Wl{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new IT}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Rp(this),this._firestoreClient.terminate()}}function AT(e,t){const n=typeof e=="object"?e:Lv(),r=typeof e=="string"?e:t||"(default)",s=kv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=xy("firestore");i&&wT(s,...i)}return s}function bT(e){return e._firestoreClient||Rp(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Rp(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new yE(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,bp(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new gT(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hr(Gt.fromBase64String(t))}catch(n){throw new M(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new hr(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new M(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new M(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=/^__.*__$/;function Cp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Xl{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Xl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.mu(t),s}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Da(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if(Cp(this.du)&&RT.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class PT{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ro(t)}Su(t,n,r,s=!1){return new Xl({du:t,methodName:n,wu:r,path:zt.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ST(e){const t=e._freezeSettings(),n=ro(e._databaseId);return new PT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function CT(e,t,n,r=!1){return Jl(n,e.Su(r?4:3,t))}function Jl(e,t){if(xp(e=Yr(e)))return VT("Unsupported field value:",t,e),xT(e,t);if(e instanceof Sp)return function(r,s){if(!Cp(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Jl(a,s.gu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Yr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xt.fromDate(r);return{timestampValue:Pa(s.serializer,i)}}if(r instanceof xt){const i=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pa(s.serializer,i)}}if(r instanceof Yl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hr)return{bytesValue:sp(s.serializer,r._byteString)};if(r instanceof ke){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ip(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${io(r)}`)}(e,t)}function xT(e,t){const n={};return Od(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ts(e,(r,s)=>{const i=Jl(s,t.Ru(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function xp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof xt||e instanceof Yl||e instanceof hr||e instanceof ke||e instanceof Sp)}function VT(e,t,n){if(!xp(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=io(n);throw r==="an object"?t.pu(e+" a custom object"):t.pu(e+" "+r)}}const DT=new RegExp("[~\\*/\\[\\]]");function kT(e,t,n){if(t.search(DT)>=0)throw Da(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Pp(...t.split("."))._internalPath}catch{throw Da(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Da(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new M(T.INVALID_ARGUMENT,a+e+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new NT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Zl("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NT extends Vp{data(){return super.data()}}function Zl(e,t){return typeof t=="string"?kT(e,t):t instanceof Pp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new M(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tc{}class Dp extends tc{}function MT(e,t,...n){let r=[];t instanceof tc&&r.push(t),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof nc).length,a=i.filter(l=>l instanceof ec).length;if(o>1||o>0&&a>0)throw new M(T.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class ec extends Dp{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new ec(t,n,r)}_apply(t){const n=this._parse(t);return kp(t._query,n),new Vn(t.firestore,t.converter,Ta(t._query,n))}_parse(t){const n=ST(t.firestore);return function(i,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new M(T.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){lh(h,u);const g=[];for(const I of h)g.push(ah(l,i,I));d={arrayValue:{values:g}}}else d=ah(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||lh(h,u),d=CT(a,o,h,u==="in"||u==="not-in");return At.create(c,u,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class nc extends tc{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new nc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:me.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)kp(o,l),o=Ta(o,l)}(t._query,n),new Vn(t.firestore,t.converter,Ta(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rc extends Dp{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new rc(t,n)}_apply(t){const n=function(s,i,o){if(s.startAt!==null)throw new M(T.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new M(T.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hs(i,o)}(t._query,this._field,this._direction);return new Vn(t.firestore,t.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new yr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function LT(e,t="asc"){const n=t,r=Zl("orderBy",e);return rc._create(r,n)}function ah(e,t,n){if(typeof(n=Yr(n))=="string"){if(n==="")throw new M(T.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qd(t)&&n.indexOf("/")!==-1)throw new M(T.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(yt.fromString(n));if(!j.isDocumentKey(r))throw new M(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cu(e,new j(r))}if(n instanceof ke)return Cu(e,n._key);throw new M(T.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${io(n)}.`)}function lh(e,t){if(!Array.isArray(e)||e.length===0)throw new M(T.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kp(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new M(T.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(T.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class FT{convertValue(t,n="none"){switch(Pn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return It(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Rn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Q()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ts(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Yl(It(t.latitude),It(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Dl(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ls(t));default:return null}}convertTimestamp(t){const n=sn(t);return new xt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=yt.fromString(t);bt(hp(r));const s=new cs(r.get(1),r.get(3)),i=new j(r.popFirst(5));return s.isEqual(n)||Ve(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Np extends Vp{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Zl("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xs extends Np{data(t={}){return super.data(t)}}class UT{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new kr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Xs(this._firestore,this._userDataWriter,r.key,r,new kr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Xs(s._firestore,s._userDataWriter,a.doc.key,a.doc,new kr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Xs(s._firestore,s._userDataWriter,a.doc.key,a.doc,new kr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:BT(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function BT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}class Op extends FT{constructor(t){super(),this.firestore=t}convertBytes(t){return new hr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ke(this.firestore,null,n)}}function $T(e,...t){var n,r,s;e=Yr(e);let i={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||oh(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(oh(t[o])){const h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(e instanceof ke)c=Ys(e.firestore,Va),u=Ml(e._key.path),l={next:h=>{t[o]&&t[o](jT(c,e,h))},error:t[o+1],complete:t[o+2]};else{const h=Ys(e,Vn);c=Ys(h.firestore,Va),u=h._query;const d=new Op(c);l={next:g=>{t[o]&&t[o](new UT(c,d,h,g))},error:t[o+1],complete:t[o+2]},OT(e._query)}return function(d,g,I,S){const A=new pT(S),V=new tT(g,A,I);return d.asyncQueue.enqueueAndForget(async()=>Yw(await nh(d),V)),()=>{A.La(),d.asyncQueue.enqueueAndForget(async()=>Xw(await nh(d),V))}}(bT(c),u,a,l)}function jT(e,t,n){const r=n.docs.get(t._key),s=new Op(e);return new Np(e,s,t._key,r,new kr(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){_r=s})(Mv),ci(new Xr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Va(new eE(r.getProvider("auth-internal")),new iE(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new M(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cs(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Qn(Au,"4.4.1",t),Qn(Au,"4.4.1","esm2017")})();var qT="firebase",zT="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(qT,zT,"app");const HT={apiKey:"AIzaSyBQQdDLImj_2kxfOUUlBLhITt2Z682d95k",authDomain:"perso-news-app.firebaseapp.com",projectId:"perso-news-app",storageBucket:"perso-news-app.appspot.com",messagingSenderId:"906006395441",appId:"1:906006395441:web:a03165775f4621fe123310"},KT=Sf(HT),GT=AT(KT),ch={COL:TT(GT,"ps_menu"),LABEL:"label"},QT=Si({name:"App",components:{},methods:{},data:()=>({messages:[]}),mounted(){const e=MT(ch.COL,LT(ch.LABEL,"asc")),t=$T(e,n=>{this.$data.messages=n.docs.map(r=>({id:r.id,harga:r.data().harga,label:r.data().label}))});Qa(t)}}),WT={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},YT={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},XT=X("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[X("tr",null,[X("th",{scope:"col",class:"px-16 py-3"},[X("span",{class:"sr-only"},"Poto")]),X("th",{scope:"col",class:"px-6 py-3"}," Produk "),X("th",{scope:"col",class:"px-6 py-3"}," Unit "),X("th",{scope:"col",class:"px-6 py-3"}," Harga "),X("th",{scope:"col",class:"px-6 py-3"}," Aksi ")])],-1),JT=X("td",{class:"p-4"},[X("img",{src:"https://img.icons8.com/?size=48&id=xZiTPdO57ltQ&format=png",class:"w-8 max-h-full",alt:"Apple Watch"})],-1),ZT={class:"px-6 py-4 font-semibold text-gray-900 dark:text-white"},tI=X("td",{class:"px-6 py-4"},[X("div",{class:"flex items-center"},[X("button",{class:"inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button"},[X("span",{class:"sr-only"},"Quantity button"),X("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2"},[X("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 1h16"})])]),X("div",null,[X("input",{type:"number",id:"first_product",class:"bg-gray-50 w-14 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block px-2.5 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"1",required:""})]),X("button",{class:"inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button"},[X("span",{class:"sr-only"},"Quantity button"),X("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},[X("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 1v16M1 9h16"})])])])],-1),eI={class:"px-6 py-4 font-semibold text-gray-900 dark:text-white text-end"},nI=X("td",{class:"px-6 py-4"},[X("a",{href:"#",class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Hapus")],-1);function rI(e,t,n,r,s,i){return Ie(),Ae("div",WT,[X("table",YT,[XT,X("tbody",null,[(Ie(!0),Ae(se,null,$o(e.messages,o=>(Ie(),Ae("tr",{key:o.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[JT,X("td",ZT,Zs(o.label),1),tI,X("td",eI," Rp "+Zs(o.harga),1),nI]))),128))])])])}const sI=ki(QT,[["render",rI]]),iI={},oI={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},aI=Xa('<div class="flex flex-column sm:flex-row flex-wrap space-y-4 sm:space-y-0 items-center justify-between pb-4"><div></div><label for="table-search" class="sr-only">Search</label><div class="relative"><div class="absolute inset-y-0 left-0 rtl:inset-r-0 rtl:right-0 flex items-center ps-3 pointer-events-none"><svg class="w-5 h-5 text-gray-500 dark:text-gray-400" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg></div><input type="text" id="table-search" class="block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search for items"></div></div><table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"><caption class="p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"> Pesanan <p class="mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"> Daftar pesanan yang masuk </p></caption><thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"><tr><th scope="col" class="p-4"><div class="flex items-center"><input id="checkbox-all-search" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"><label for="checkbox-all-search" class="sr-only">checkbox</label></div></th><th scope="col" class="px-6 py-3"> Product name </th><th scope="col" class="px-6 py-3"> Color </th><th scope="col" class="px-6 py-3"> Category </th><th scope="col" class="px-6 py-3"> Price </th><th scope="col" class="px-6 py-3"> Action </th></tr></thead><tbody><tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"><td class="w-4 p-4"><div class="flex items-center"><input id="checkbox-table-search-1" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"><label for="checkbox-table-search-1" class="sr-only">checkbox</label></div></td><th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"> Apple MacBook Pro 17&quot; </th><td class="px-6 py-4"> Silver </td><td class="px-6 py-4"> Laptop </td><td class="px-6 py-4"> $2999 </td><td class="px-6 py-4"><a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a></td></tr><tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"><td class="w-4 p-4"><div class="flex items-center"><input id="checkbox-table-search-2" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"><label for="checkbox-table-search-2" class="sr-only">checkbox</label></div></td><th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"> Microsoft Surface Pro </th><td class="px-6 py-4"> White </td><td class="px-6 py-4"> Laptop PC </td><td class="px-6 py-4"> $1999 </td><td class="px-6 py-4"><a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a></td></tr><tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"><td class="w-4 p-4"><div class="flex items-center"><input id="checkbox-table-search-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"><label for="checkbox-table-search-3" class="sr-only">checkbox</label></div></td><th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"> Magic Mouse 2 </th><td class="px-6 py-4"> Black </td><td class="px-6 py-4"> Accessories </td><td class="px-6 py-4"> $99 </td><td class="px-6 py-4"><a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a></td></tr><tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"><td class="w-4 p-4"><div class="flex items-center"><input id="checkbox-table-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"><label for="checkbox-table-3" class="sr-only">checkbox</label></div></td><th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"> Apple Watch </th><td class="px-6 py-4"> Silver </td><td class="px-6 py-4"> Accessories </td><td class="px-6 py-4"> $179 </td><td class="px-6 py-4"><a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a></td></tr><tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"><td class="w-4 p-4"><div class="flex items-center"><input id="checkbox-table-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"><label for="checkbox-table-3" class="sr-only">checkbox</label></div></td><th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"> iPad </th><td class="px-6 py-4"> Gold </td><td class="px-6 py-4"> Tablet </td><td class="px-6 py-4"> $699 </td><td class="px-6 py-4"><a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a></td></tr><tr class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-600"><td class="w-4 p-4"><div class="flex items-center"><input id="checkbox-table-3" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"><label for="checkbox-table-3" class="sr-only">checkbox</label></div></td><th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"> Apple iMac 27&quot; </th><td class="px-6 py-4"> Silver </td><td class="px-6 py-4"> PC Desktop </td><td class="px-6 py-4"> $3999 </td><td class="px-6 py-4"><a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a></td></tr></tbody></table>',2),lI=[aI];function cI(e,t){return Ie(),Ae("div",oI,lI)}const uI=ki(iI,[["render",cI]]),hI=[{path:"/",component:Ey},{path:"/menues",component:sI},{path:"/orders",component:uI}],fI=my({history:D_(),routes:hI});Jm(d_).use(fI).mount("#app");
